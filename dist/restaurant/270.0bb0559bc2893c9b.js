"use strict";(self.webpackChunkRestaurant=self.webpackChunkRestaurant||[]).push([[270],{3666:(K,v,r)=>{r.d(v,{h:()=>f});var s=r(1271),t=r(5e3),b=r(9808),_=r(5245),x=r(508);function e(d,g){1&d&&(t.TgZ(0,"mat-icon",13),t._uU(1," error "),t.qZA())}function C(d,g){1&d&&(t.TgZ(0,"mat-icon",14),t._uU(1," check_circle "),t.qZA())}function E(d,g){1&d&&(t.TgZ(0,"mat-icon",15),t._uU(1," warning "),t.qZA())}function O(d,g){1&d&&(t.TgZ(0,"mat-icon",16),t._uU(1," info "),t.qZA())}let f=(()=>{class d{constructor(c,u){this.data=c,this._snackRef=u}ngOnInit(){}dismiss(){this._snackRef.dismiss()}}return d.\u0275fac=function(c){return new(c||d)(t.Y36(s.qD),t.Y36(s.OX))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-snackbar"]],decls:15,vars:8,consts:[[1,"max-w-sm","w-full","bg-white","rounded-lg","overflow-hidden"],[1,"p-4"],[1,"flex","items-center","justify-center"],["class","h-6 w-6 text-red-600 dark:text-red-700","aria-hidden","false","aria-label","Error",4,"ngIf"],["class","h-6 w-6 text-green-600 dark:text-green-700","aria-hidden","false","aria-label","Error",4,"ngIf"],["class","h-6 w-6 text-yellow-500","aria-hidden","false","aria-label","warning",4,"ngIf"],["class","h-6 w-6 text-blue-600 dark:text-blue-700","aria-hidden","false","aria-label","info",4,"ngIf"],[1,"ml-3","w-0","flex-1","text-sm","font-medium","text-gray-900"],[1,"ml-4","flex-shrink-0","flex"],["matRipple","",1,"bg-white","rounded-full","p-1","inline-flex","text-gray-400","hover:text-gray-500","focus:outline-none","custom-ripple",3,"matRippleCentered","matRippleDisabled","matRippleUnbounded","click"],[1,"sr-only"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor","aria-hidden","true",1,"h-5","w-5"],["fill-rule","evenodd","d","M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule","evenodd"],["aria-hidden","false","aria-label","Error",1,"h-6","w-6","text-red-600","dark:text-red-700"],["aria-hidden","false","aria-label","Error",1,"h-6","w-6","text-green-600","dark:text-green-700"],["aria-hidden","false","aria-label","warning",1,"h-6","w-6","text-yellow-500"],["aria-hidden","false","aria-label","info",1,"h-6","w-6","text-blue-600","dark:text-blue-700"]],template:function(c,u){1&c&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t.YNc(3,e,2,0,"mat-icon",3),t.YNc(4,C,2,0,"mat-icon",4),t.YNc(5,E,2,0,"mat-icon",5),t.YNc(6,O,2,0,"mat-icon",6),t.TgZ(7,"p",7),t._uU(8),t.qZA(),t.TgZ(9,"div",8)(10,"button",9),t.NdJ("click",function(){return u.dismiss()}),t.TgZ(11,"span",10),t._uU(12,"Close"),t.qZA(),t.O4$(),t.TgZ(13,"svg",11),t._UZ(14,"path",12),t.qZA()()()()()()),2&c&&(t.xp6(3),t.Q6J("ngIf","E"==u.data.type),t.xp6(1),t.Q6J("ngIf","S"==u.data.type),t.xp6(1),t.Q6J("ngIf","W"==u.data.type),t.xp6(1),t.Q6J("ngIf","I"==u.data.type),t.xp6(2),t.hij(" ",null==u.data?null:u.data.message," "),t.xp6(2),t.Q6J("matRippleCentered",!1)("matRippleDisabled",!1)("matRippleUnbounded",!1))},directives:[b.O5,_.Hw,x.wG],styles:[""]}),d})()},4270:(K,v,r)=>{r.d(v,{G:()=>H});var s=r(3075),t=r(4987),b=r(3014),_=r.n(b),x=r(3666),e=r(5e3),C=r(9118),E=r(8966),O=r(1271),f=r(9808),d=r(8814),g=r(508),c=r(5245);function u(n,m){1&n&&e._UZ(0,"app-loader",2)}const h=function(n){return{"border-2 border-red-500":n}},J=function(n,m){return{"bg-indigo-200 hover:bg-indigo-300":n,"bg-indigo-600 hover:bg-indigo-700":m}};function N(n,m){if(1&n){const i=e.EpF();e.TgZ(0,"div",6)(1,"form",7),e.NdJ("ngSubmit",function(){return e.CHM(i),e.oxw(2).sendOtp()}),e.TgZ(2,"h1",8),e._uU(3,"Login / Signup Info"),e.qZA(),e.TgZ(4,"div",9)(5,"div")(6,"label",10),e._uU(7,"Email address"),e.qZA(),e._UZ(8,"input",11),e.qZA(),e.TgZ(9,"div")(10,"label",12),e._uU(11,"Mobile"),e.qZA(),e._UZ(12,"input",13),e.qZA()(),e.TgZ(13,"div",14),e._uU(14),e.qZA(),e.TgZ(15,"button",15)(16,"span",16),e.O4$(),e.TgZ(17,"svg",17),e._UZ(18,"path",18),e.qZA()(),e._uU(19," Sent OTP "),e.qZA()()()}if(2&n){const i=e.oxw(2);let o,l;e.xp6(1),e.Q6J("formGroup",i.loginFormGroup),e.xp6(7),e.Q6J("ngClass",e.VKq(9,h,(null==(o=i.loginFormGroup.get("email"))?null:o.errors)&&((null==(o=i.loginFormGroup.get("email"))?null:o.touched)||(null==(o=i.loginFormGroup.get("email"))?null:o.dirty)))),e.xp6(4),e.Q6J("ngClass",e.VKq(11,h,(null==(l=i.loginFormGroup.get("mobile"))?null:l.errors)&&((null==(l=i.loginFormGroup.get("mobile"))?null:l.touched)||(null==(l=i.loginFormGroup.get("mobile"))?null:l.dirty)))),e.xp6(2),e.Oqu(i.getErrors("loginFormGroup")),e.xp6(1),e.Q6J("disabled",i.loginFormGroup.invalid)("ngClass",e.WLB(13,J,i.loginFormGroup.invalid,!i.loginFormGroup.invalid))("matRippleCentered",!1)("matRippleDisabled",!1)("matRippleUnbounded",!1)}}function W(n,m){if(1&n&&(e.TgZ(0,"span",31),e._uU(1),e.qZA()),2&n){const i=e.oxw(3);e.xp6(1),e.hij("",i.timeLeft,"s")}}const Q=function(n){return{"text-indigo-200":n}};function Y(n,m){if(1&n){const i=e.EpF();e.TgZ(0,"div")(1,"form",19),e.NdJ("ngSubmit",function(){return e.CHM(i),e.oxw(2).onLogin()}),e.TgZ(2,"div",20)(3,"h1",21),e._uU(4,"Verify OTP"),e.qZA(),e.TgZ(5,"div",22)(6,"a",23),e.NdJ("click",function(){return e.CHM(i),e.oxw(2).resendOtp()}),e._uU(7," Resend Otp "),e.qZA(),e.YNc(8,W,2,1,"span",24),e.qZA()(),e.TgZ(9,"div",9)(10,"div")(11,"label",25),e._uU(12,"Otp"),e.qZA(),e._UZ(13,"input",26),e.qZA()(),e.TgZ(14,"div",14),e._uU(15),e.qZA(),e.TgZ(16,"div")(17,"button",27)(18,"span",16),e.O4$(),e.TgZ(19,"svg",17),e._UZ(20,"path",18),e.qZA()(),e._uU(21," Login "),e.qZA(),e.kcU(),e.TgZ(22,"div",28),e.NdJ("click",function(){e.CHM(i);const l=e.oxw(2);return l.otpScreen=!l.otpScreen}),e.TgZ(23,"mat-icon",29),e._uU(24,"chevron_left "),e.qZA(),e.TgZ(25,"a",30),e._uU(26," Back to login"),e.qZA()()()()()}if(2&n){const i=e.oxw(2);let o;e.xp6(1),e.Q6J("formGroup",i.loginFormOtpGroup),e.xp6(5),e.Q6J("ngClass",e.VKq(16,Q,i.wait))("matRippleCentered",!1)("matRippleDisabled",!1)("matRippleUnbounded",!1),e.xp6(2),e.Q6J("ngIf",0!=i.timeLeft&&60!=i.timeLeft),e.xp6(5),e.Q6J("ngClass",e.VKq(18,h,(null==(o=i.loginFormOtpGroup.get("otp"))?null:o.errors)&&((null==(o=i.loginFormOtpGroup.get("otp"))?null:o.touched)||(null==(o=i.loginFormOtpGroup.get("otp"))?null:o.dirty)))),e.xp6(2),e.Oqu(i.getErrors("loginFormOtpGroup")),e.xp6(2),e.Q6J("disabled",i.loginFormOtpGroup.invalid)("ngClass",e.WLB(20,J,i.loginFormOtpGroup.invalid,!i.loginFormOtpGroup.invalid))("matRippleCentered",!1)("matRippleDisabled",!1)("matRippleUnbounded",!1),e.xp6(5),e.Q6J("matRippleCentered",!1)("matRippleDisabled",!1)("matRippleUnbounded",!1)}}function j(n,m){if(1&n&&(e.TgZ(0,"div",3),e.YNc(1,N,20,16,"div",4),e.YNc(2,Y,27,23,"div",5),e.qZA()),2&n){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",!i.otpScreen&&i.loginScreen),e.xp6(1),e.Q6J("ngIf",i.otpScreen&&!i.loginScreen)}}let H=(()=>{class n{constructor(i,o,l,a){this.formBuilder=i,this.mainService=o,this.dialog=l,this._snackBar=a,this.wait=!1,this.timeLeft=t.g.OTP_TIMER,this.mobileRegrex=/[0,9]\d{4,17}/,this.otpScreen=!1,this.loginScreen=!0,this.number=0,this.email="",this.loading=!1,this.loginFormGroup=this.formBuilder.group({email:["",[s.kI.required,s.kI.email]],mobile:["",[s.kI.required,s.kI.pattern(this.mobileRegrex)]]}),this.loginFormOtpGroup=this.formBuilder.group({otp:["",[s.kI.required,s.kI.maxLength(6)]]})}ngOnInit(){}resendOtp(){this.wait||this.sendOtp()}sendOtp(){this.loginScreen=!0,this.otpScreen=!1,this.loading=!0,this.loginFormOtpGroup.reset(),this.loading=!0;const i={email:this.loginFormGroup.value.email.toLowerCase(),number:this.loginFormGroup.value.mobile};_().post(t.g.BASE_URL+t.g.LOGIN_URL,i).then(o=>{this.wait=!0,this.startTimer(),this.otpScreen=!0,this.loginScreen=!1,this.number=this.loginFormGroup.value.mobile,this.email=this.loginFormGroup.value.email,this._snackBar.openFromComponent(x.h,{data:{message:"Otp sent successfully",type:"S"},panelClass:"snack-bar",horizontalPosition:"center",verticalPosition:"top",duration:1700}),this.loading=!1}).catch(o=>{this.loading=!1,console.log("Error",o),this.mainService.openDialog("Error",this.mainService.errorMessage(o),"E")})}onLogin(){if(this.loading=!0,0!=this.number){const i={number:this.number,otp:this.loginFormOtpGroup.value.otp};_().post(t.g.BASE_URL+t.g.VERIFY_USER_URL,i).then(o=>{this.timer&&clearInterval(this.timer),this.loginScreen=!1,this.otpScreen=!1;const l=o.data.jwt,a=this.mainService.getToLocalStorage(t.g.LOCAL_USER);a.number=this.number,a.email=this.email,a.username=o.data.user.username,a.currency=o.data.user.currency,a.countryCode=o.data.user.countryCode,a.country=o.data.user.country,a.confirmed=o.data.user.confirmed,a.blocked=o.data.user.blocked,a.fullName=o.data.user.fullName||"",a.jwt=l,a.id=o.data.user.id,this.mainService.setToLocalStorage(a,t.g.LOCAL_USER),this.loginFormOtpGroup.reset(),window.location.reload(),this.loading=!1}).catch(o=>{this.loading=!1,console.log("Error",o),this.mainService.openDialog("Error",this.mainService.errorMessage(o),"E")})}}getErrors(i){var o,l,a,T,R,y,L,U,Z,k,w,I,G,D,F,M,A,S,P,q,B;let p="";return"loginFormGroup"==i&&((null===(o=this.loginFormGroup.get("email"))||void 0===o?void 0:o.errors)&&((null===(l=this.loginFormGroup.get("email"))||void 0===l?void 0:l.touched)||(null===(a=this.loginFormGroup.get("email"))||void 0===a?void 0:a.dirty))||(null===(T=this.loginFormGroup.get("mobile"))||void 0===T?void 0:T.errors)&&((null===(R=this.loginFormGroup.get("mobile"))||void 0===R?void 0:R.touched)||(null===(y=this.loginFormGroup.get("mobile"))||void 0===y?void 0:y.dirty)))&&((null===(U=null===(L=this.loginFormGroup.get("mobile"))||void 0===L?void 0:L.errors)||void 0===U?void 0:U.required)&&(p+="Mobile is required"),(null===(k=null===(Z=this.loginFormGroup.get("email"))||void 0===Z?void 0:Z.errors)||void 0===k?void 0:k.required)&&(p.length>0&&(p+=" & "),p+="Email is required"),(null===(I=null===(w=this.loginFormGroup.get("email"))||void 0===w?void 0:w.errors)||void 0===I?void 0:I.email)&&(p.length>0&&(p+=" & "),p+="Email is invalid"),(null===(D=null===(G=this.loginFormGroup.get("mobile"))||void 0===G?void 0:G.errors)||void 0===D?void 0:D.pattern)&&(p.length>0&&(p+=" & "),p+="Mobile is invalid")),"loginFormOtpGroup"==i&&(null===(F=this.loginFormOtpGroup.get("otp"))||void 0===F?void 0:F.errors)&&((null===(M=this.loginFormOtpGroup.get("otp"))||void 0===M?void 0:M.touched)||(null===(A=this.loginFormOtpGroup.get("otp"))||void 0===A?void 0:A.dirty))&&((null===(P=null===(S=this.loginFormOtpGroup.get("otp"))||void 0===S?void 0:S.errors)||void 0===P?void 0:P.required)&&(p+="Otp is required"),(null===(B=null===(q=this.loginFormOtpGroup.get("otp"))||void 0===q?void 0:q.errors)||void 0===B?void 0:B.maxLength)&&(p.length>0&&(p+=" & "),p+="Otp length should be 6")),p}startTimer(){this.timer=setInterval(()=>{this.timeLeft>0?this.timeLeft--:(this.wait=!1,this.timeLeft=t.g.OTP_TIMER,clearInterval(this.timer))},1e3)}}return n.\u0275fac=function(i){return new(i||n)(e.Y36(s.qu),e.Y36(C.J),e.Y36(E.uw),e.Y36(O.ux))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-login"]],decls:2,vars:2,consts:[["class","absolute top-0 left-0",4,"ngIf"],["class","p-5 bg-white dark:bg-slate-800 ",4,"ngIf"],[1,"absolute","top-0","left-0"],[1,"p-5","bg-white","dark:bg-slate-800"],["class","space-y-6",4,"ngIf"],[4,"ngIf"],[1,"space-y-6"],[3,"formGroup","ngSubmit"],[1,"font-semibold","text-sm","mt-6","dark:text-white"],[1,"rounded-md","shadow-sm","mt-4","-space-y-px"],["for","email-address",1,"sr-only","dark:text-white"],["formControlName","email","name","email","type","email","autocomplete","email","required","","placeholder","Email address (abc@mail.com)",1,"dark:bg-slate-700","dark:placeholder:text-gray-400","dark:text-white","dark:ring-slate-600","dark:border-gray-500","appearance-none","rounded-none","relative","block","w-full","px-3","py-2","border","border-gray-300","placeholder-gray-500","text-gray-900","rounded-t-md","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","focus:z-10","sm:text-sm",3,"ngClass"],["for","mobile",1,"sr-only","dark:text-white"],["formControlName","mobile","name","mobile","type","tel","autocomplete","mobile","required","","placeholder","Mobile Number (9876543210)",1,"dark:bg-slate-700","dark:placeholder:text-gray-400","dark:text-white","dark:ring-slate-600","dark:border-gray-500","appearance-none","rounded-none","relative","block","w-full","px-3","py-2","border","border-gray-300","placeholder-gray-500","text-gray-900","rounded-b-md","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","focus:z-10","sm:text-sm",3,"ngClass"],[1,"text-red-500","text-xs","mt-2"],["type","submit","matRipple","",1,"group","relative","w-full","mt-4","flex","justify-center","py-2","px-4","border","border-transparent","text-sm","font-medium","rounded-md","text-white","bg-indigo-600","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500","custom-ripple",3,"disabled","ngClass","matRippleCentered","matRippleDisabled","matRippleUnbounded"],[1,"absolute","left-0","inset-y-0","flex","items-center","pl-3"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor","aria-hidden","true",1,"h-5","w-5","text-indigo-500","group-hover:text-indigo-400"],["fill-rule","evenodd","d","M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule","evenodd"],[1,"space-y-6",3,"formGroup","ngSubmit"],[1,"flex","justify-between","mt-6"],[1,"font-semibold","text-sm","dark:text-white"],[1,"flex","items-center","space-x-1"],["matRipple","",1,"text-indigo-500","underline","text-sm","cursor-pointer","p-2","rounded-full","custom-ripple",3,"ngClass","matRippleCentered","matRippleDisabled","matRippleUnbounded","click"],["class","text-indigo-500 text-xs",4,"ngIf"],["for","otp",1,"sr-only"],["formControlName","otp","name","otp","type","tel","autocomplete","","required","","placeholder","otp (654321)",1,"dark:bg-slate-700","dark:placeholder:text-gray-400","dark:text-white","dark:ring-slate-600","dark:border-gray-500","appearance-none","relative","block","w-full","px-3","py-2","border","border-gray-300","placeholder-gray-500","text-gray-900","rounded-md","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","focus:z-10","sm:text-sm",3,"ngClass"],["type","submit","matRipple","",1,"group","relative","w-full","flex","mt-4","justify-center","py-2","px-4","border","border-transparent","text-sm","font-medium","rounded-md","text-white","bg-indigo-600","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500","custom-ripple",3,"disabled","ngClass","matRippleCentered","matRippleDisabled","matRippleUnbounded"],["matRipple","",1,"flex","justify-center","items-center","mt-6","p-2","rounded-full","custom-ripple",3,"matRippleCentered","matRippleDisabled","matRippleUnbounded","click"],["aria-hidden","false","aria-label","back to home",1,"text-indigo-500","text-sm"],[1,"text-indigo-500","text-sm","cursor-pointer"],[1,"text-indigo-500","text-xs"]],template:function(i,o){1&i&&(e.YNc(0,u,1,0,"app-loader",0),e.YNc(1,j,3,2,"div",1)),2&i&&(e.Q6J("ngIf",o.loading),e.xp6(1),e.Q6J("ngIf",!o.loading))},directives:[f.O5,d.R,s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,s.Q7,f.mk,g.wG,c.Hw],styles:[""]}),n})()}}]);