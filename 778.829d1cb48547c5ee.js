"use strict";(self.webpackChunkRestaurant=self.webpackChunkRestaurant||[]).push([[778],{9778:(D,v,a)=>{a.r(v),a.d(v,{ProfileModule:()=>P});var r=a(9808),g=a(9826),x=a(5861),f=a(4987),_=a(9421),e=a(5e3),y=a(1584),T=a(5045),Z=a(8966),w=a(8734),A=a(6444),h=a(5245);function I(i,l){1&i&&(e.O4$(),e.TgZ(0,"svg",15),e._UZ(1,"path",16),e.qZA())}function U(i,l){if(1&i&&e._UZ(0,"img",17),2&i){const t=e.oxw();e.Q6J("src",t.getImage(),e.LSH)}}function b(i,l){if(1&i&&(e.TgZ(0,"h3",20)(1,"span",21)(2,"mat-icon",22),e._uU(3,"badge"),e.qZA(),e._uU(4),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(4),e.hij(" ",null==t.me?null:t.me.designation," ")}}function S(i,l){if(1&i&&(e.TgZ(0,"div")(1,"h1",18),e._uU(2),e.qZA(),e.YNc(3,b,5,1,"h3",19),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(null==t.me?null:t.me.fullName),e.xp6(1),e.Q6J("ngIf",null==t.me?null:t.me.designation)}}function q(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",23)(1,"button",24),e.NdJ("click",function(){return e.CHM(t),e.oxw().updateEmployeeImage()}),e.TgZ(2,"mat-icon",22),e._uU(3," save"),e.qZA(),e._uU(4," Save "),e.qZA()()}}function C(i,l){if(1&i&&(e.TgZ(0,"div",25)(1,"dt",26),e._uU(2,"Full name"),e.qZA(),e.TgZ(3,"dd",27),e._uU(4),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.Oqu(null==t.me?null:t.me.fullName)}}function N(i,l){if(1&i&&(e.TgZ(0,"div",25)(1,"dt",26),e._uU(2,"Designation"),e.qZA(),e.TgZ(3,"dd",28),e._uU(4),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.Oqu(null==t.me?null:t.me.designation)}}function J(i,l){if(1&i&&(e.TgZ(0,"div",25)(1,"dt",26),e._uU(2,"Email address"),e.qZA(),e.TgZ(3,"dd",27),e._uU(4),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.Oqu(null==t.me?null:t.me.email)}}function V(i,l){if(1&i&&(e.TgZ(0,"div",25)(1,"dt",26),e._uU(2,"Salary"),e.qZA(),e.TgZ(3,"dd",27),e._uU(4),e.ALo(5,"currency"),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.Oqu(e.xi3(5,1,null==t.me?null:t.me.salary,null==t.me?null:t.me.currency))}}function Y(i,l){if(1&i&&(e.TgZ(0,"div",25)(1,"dt",26),e._uU(2,"Username"),e.qZA(),e.TgZ(3,"dd",27),e._uU(4),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.Oqu(null==t.me?null:t.me.username)}}function O(i,l){if(1&i&&(e.TgZ(0,"div",25)(1,"dt",26),e._uU(2,"Mobile"),e.qZA(),e.TgZ(3,"dd",27),e._uU(4),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.AsE("",null==t.me?null:t.me.countryCode,"\xa0",null==t.me?null:t.me.number,"")}}function E(i,l){if(1&i&&(e.TgZ(0,"div",25)(1,"dt",26),e._uU(2,"Address"),e.qZA(),e.TgZ(3,"dd",27),e._uU(4),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.Oqu(null==t.me?null:t.me.address)}}const M=function(i){return{formats:i}};function Q(i,l){if(1&i&&(e.TgZ(0,"div",33)(1,"div",34),e._UZ(2,"img",35),e.qZA(),e.TgZ(3,"div",36)(4,"div"),e._UZ(5,"span",37),e.TgZ(6,"p",38),e._uU(7),e.qZA(),e.TgZ(8,"p",39),e._uU(9),e.qZA()()()()),2&i){const t=l.$implicit,n=e.oxw(2);e.xp6(2),e.Q6J("src",null!=t&&t.formats?n.getImageUrl(null!=t&&t.formats?e.VKq(4,M,null==t?null:t.formats):""):"",e.LSH)("alt",null==t?null:t.fullName),e.xp6(5),e.Oqu(null==t?null:t.fullName),e.xp6(2),e.Oqu(null==t?null:t.name)}}function F(i,l){if(1&i&&(e.TgZ(0,"div",25)(1,"dt",26),e._uU(2,"Report To"),e.qZA(),e.TgZ(3,"dd",29)(4,"div",30)(5,"div",31),e.YNc(6,Q,10,6,"div",32),e.qZA()()()()),2&i){const t=e.oxw();e.xp6(6),e.Q6J("ngForOf",t.reportTo)}}function R(i,l){if(1&i&&(e.TgZ(0,"li")(1,"div",45)(2,"div",34)(3,"div",46)(4,"mat-icon",47),e._uU(5,"call_received"),e.qZA()()(),e.TgZ(6,"div",36)(7,"div",48),e._UZ(8,"span",37),e.TgZ(9,"p",49),e._uU(10),e.ALo(11,"currency"),e.qZA(),e.TgZ(12,"p",39),e._uU(13),e.ALo(14,"date"),e.qZA()()()()()),2&i){const t=l.$implicit;e.xp6(10),e.Oqu(e.xi3(11,2,null==t?null:t.debit,t.currency)),e.xp6(3),e.Oqu(e.lcZ(14,5,null==t?null:t.createdAt))}}function H(i,l){if(1&i&&(e.TgZ(0,"div",25)(1,"dt",26),e._uU(2,"Salary History"),e.qZA(),e.TgZ(3,"div",40)(4,"nav",41)(5,"div",42)(6,"ul",43),e.YNc(7,R,15,7,"li",44),e.qZA()()()()()),2&i){const t=e.oxw();e.xp6(7),e.Q6J("ngForOf",t.salaryHistory)}}const j=[{path:"",component:(()=>{class i{constructor(t,n,s,o,m,d,u,c){this.userService=t,this.mainService=n,this.route=s,this.router=o,this.dialog=m,this._location=d,this.adminService=u,this.restaurantService=c,this.loading=!0,this.formdata=new FormData}ngOnInit(){this.getUserInfo(),this.routeQueryParams$=this.route.queryParams.subscribe(t=>{t.showImageDialog&&this.openEditImageModal()})}updateEmployeeImage(){this.loading=!0;const t=this.restaurantService.getRestaurantSlug();t&&(this.formdata.append("data",JSON.stringify({employee:this.me.id})),this.adminService.updateMyImage(this.formdata,t).then(n=>{this.formdata.delete("files.image"),this.formdata.delete("data"),this.loading=!1,this.mainService.openDialog("Success","Image Updated Successfully","S",!0)}).catch(n=>{this.formdata.delete("data"),this.loading=!1,console.log("Error",n),this.mainService.openDialog("Error",this.mainService.errorMessage(n),"E")}))}getUserInfo(){var t=this;return(0,x.Z)(function*(){var n;t.loading=!0,t.restaurantService.getRestaurantSlug()&&t.userService.checkLoggedIn(null===(n=t.mainService.getToLocalStorage(f.g.LOCAL_USER))||void 0===n?void 0:n.jwt).then(o=>{var m,d,u,c,p;t.loading=!1,t.me=null==o?void 0:o.data,t.reportTo=null===(m=null==o?void 0:o.data)||void 0===m?void 0:m.reportTo,t.salaryHistory=null===(d=null==o?void 0:o.data)||void 0===d?void 0:d.salaryHistory,(null===(u=t.me)||void 0===u?void 0:u.image)&&(t.imageFromApi=t.mainService.getImageUrl((null===(c=t.me)||void 0===c?void 0:c.image)?null===(p=t.me)||void 0===p?void 0:p.image:"",f.g.IMAGE_JSON_STRUCTURE_WITHOUT_ATTRIBUTE),console.log(t.imageFromApi))}).catch(o=>{t.loading=!1,console.log("Error",o),t.mainService.openDialog("Error",t.mainService.errorMessage(o),"E",!1,!0)})})()}getImageUrl(t){return this.mainService.getImageUrl(t,f.g.IMAGE_JSON_STRUCTURE_WITHOUT_ATTRIBUTE)}changeImage(){this.router.navigate([],{queryParams:{showImageDialog:!0},relativeTo:this.route})}getImage(){return this.selectedImage?this.selectedImage:this.imageFromApi}openEditImageModal(){var t=this;this.dialog.open(_.D,{data:{image:""},panelClass:"custom-editDishmodalbox"}).afterClosed().subscribe(function(){var s=(0,x.Z)(function*(o){(null==o?void 0:o.image)&&(t.formdata.delete("files.image"),t.selectedImage=null==o?void 0:o.base64,t.formdata.append("files.image",null==o?void 0:o.image,o.name)),t._location.back()});return function(o){return s.apply(this,arguments)}}())}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(y.K),e.Y36(T.J),e.Y36(g.gz),e.Y36(g.F0),e.Y36(Z.uw),e.Y36(r.Ye),e.Y36(w.l),e.Y36(A.T))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-view"]],decls:25,vars:13,consts:[[1,"max-w-6xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"mt-6","mx-auto","md:flex","md:items-center","space-y-4","md:justify-between","md:space-x-5"],[1,"flex","items-center","space-x-5"],[1,"relative","rounded-full","overflow-hidden","flex-shrink-0"],[1,"transition","duration-150","ease-in-out","hover:opacity-80","opacity-0","bg-gray-300","h-full","absolute","w-full","z-10","text-xs","flex","justify-between","items-center","text-gray-700",3,"click"],[1,"mx-auto"],[1,"relative","shadow"],[1,"h-16","w-16","rounded-full","overflow-hidden"],["class","h-16 w-16 text-gray-300 bg-transparent","fill","currentColor","viewBox","0 0 24 24",4,"ngIf"],["loading","lazy","class","h-16 w-16 sm:h-20 sm:w-20 overflow-hidden rounded-full object-cover",3,"src",4,"ngIf"],[4,"ngIf"],["class","mt-6 flex space-y-reverse sm:flex-row-reverse sm:justify-end sm:space-x-reverse sm:space-y-0 space-x-3 md:mt-0 md:flex-row md:space-x-3",4,"ngIf"],[1,"mt-5","border-t","border-gray-200"],[1,"sm:divide-y","sm:divide-gray-200"],["class","py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4",4,"ngIf"],["fill","currentColor","viewBox","0 0 24 24",1,"h-16","w-16","text-gray-300","bg-transparent"],["d","M24 20.993V24H0v-2.996A14.977 14.977 0 0112.004 15c4.904 0 9.26 2.354 11.996 5.993zM16.002 8.999a4 4 0 11-8 0 4 4 0 018 0z"],["loading","lazy",1,"h-16","w-16","sm:h-20","sm:w-20","overflow-hidden","rounded-full","object-cover",3,"src"],[1,"text-2xl","font-bold","text-gray-900"],["class","text-base",4,"ngIf"],[1,"text-base"],[1,"flex","items-center","text-blue-500"],[1,"mr-2"],[1,"mt-6","flex","space-y-reverse","sm:flex-row-reverse","sm:justify-end","sm:space-x-reverse","sm:space-y-0","space-x-3","md:mt-0","md:flex-row","md:space-x-3"],[1,"disabled:bg-blue-400","flex","items-center","bg-blue-600","border","border-transparent","rounded-md","shadow-sm","py-2","px-4","text-sm","text-white","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-offset-gray-50","focus:ring-blue-500",3,"click"],[1,"py-4","sm:py-5","sm:grid","sm:grid-cols-3","sm:gap-4"],[1,"text-sm","font-medium","text-gray-500"],[1,"mt-1","text-sm","text-gray-900","sm:mt-0","sm:col-span-2"],[1,"mt-1","text-sm","text-gray-900","sm:mt-0","sm:col-span-2","capitalize"],[1,"mt-2","text-sm","text-gray-900","sm:mt-0","sm:col-span-2"],[1,"max-w-5xl","mx-auto"],[1,"grid","grid-cols-1","gap-4","sm:grid-cols-2"],["class","relative rounded-lg border border-gray-300 bg-white px-6 py-5 shadow-sm flex items-center space-x-3  focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-pink-500",4,"ngFor","ngForOf"],[1,"relative","rounded-lg","border","border-gray-300","bg-white","px-6","py-5","shadow-sm","flex","items-center","space-x-3","focus-within:ring-2","focus-within:ring-offset-2","focus-within:ring-pink-500"],[1,"flex-shrink-0"],[1,"h-10","w-10","rounded-full",3,"src","alt"],[1,"flex-1","min-w-0"],["aria-hidden","true",1,"absolute","inset-0"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-sm","text-gray-500","truncate"],[1,"sm:mt-0","mt-2","col-span-2"],["aria-label","Directory",1,"flex-1","h-72","overflow-y-scroll","rounded-md","border"],[1,"relative"],["role","list",1,"relative","z-0","divide-y","divide-gray-200"],[4,"ngFor","ngForOf"],[1,"relative","px-6","py-5","flex","items-center","space-x-3","hover:bg-gray-50","focus-within:ring-2","focus-within:ring-inset","focus-within:ring-blue-500"],[1,"bg-green-100","h-10","w-10","flex","justify-center","items-center","rounded-full"],[1,"text-green-700"],[1,"focus:outline-none"],[1,"text-sm","font-medium","text-red-500"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div")(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4),e.NdJ("click",function(){return n.changeImage()}),e.TgZ(6,"mat-icon",5),e._uU(7,"add_a_photo"),e.qZA()(),e.TgZ(8,"div",6)(9,"span",7),e.YNc(10,I,2,0,"svg",8),e.YNc(11,U,1,1,"img",9),e.qZA()()(),e.YNc(12,S,4,2,"div",10),e.qZA(),e.YNc(13,q,5,0,"div",11),e.qZA()(),e.TgZ(14,"div",12)(15,"dl",13),e.YNc(16,C,5,1,"div",14),e.YNc(17,N,5,1,"div",14),e.YNc(18,J,5,1,"div",14),e.YNc(19,V,6,4,"div",14),e.YNc(20,Y,5,1,"div",14),e.YNc(21,O,5,2,"div",14),e.YNc(22,E,5,1,"div",14),e.YNc(23,F,7,1,"div",14),e.YNc(24,H,8,1,"div",14),e.qZA()()()),2&t&&(e.xp6(10),e.Q6J("ngIf",!n.selectedImage&&!n.imageFromApi),e.xp6(1),e.Q6J("ngIf",n.selectedImage||n.imageFromApi),e.xp6(1),e.Q6J("ngIf",null==n.me?null:n.me.fullName),e.xp6(1),e.Q6J("ngIf",n.selectedImage),e.xp6(3),e.Q6J("ngIf",null==n.me?null:n.me.fullName),e.xp6(1),e.Q6J("ngIf",null==n.me?null:n.me.designation),e.xp6(1),e.Q6J("ngIf",null==n.me?null:n.me.email),e.xp6(1),e.Q6J("ngIf",null==n.me?null:n.me.salary),e.xp6(1),e.Q6J("ngIf",null==n.me?null:n.me.username),e.xp6(1),e.Q6J("ngIf",null==n.me?null:n.me.number),e.xp6(1),e.Q6J("ngIf",null==n.me?null:n.me.address),e.xp6(1),e.Q6J("ngIf",n.reportTo&&(null==n.reportTo[0]?null:n.reportTo[0].id)),e.xp6(1),e.Q6J("ngIf",n.salaryHistory))},directives:[h.Hw,r.O5,r.sg],pipes:[r.H9,r.uU],styles:[""]}),i})(),pathMatch:"full"}];let z=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[g.Bz.forChild(j)],g.Bz]}),i})(),P=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[r.ez,z,h.Ps]]}),i})()}}]);