"use strict";(self.webpackChunkRestaurant=self.webpackChunkRestaurant||[]).push([[592],{158:(D,w,u)=>{u.d(w,{t:()=>T});var e=u(3014),_=u.n(e),t=u(4987),i=u(5e3),v=u(5045);let T=(()=>{class b{constructor(g){this.mainService=g}getOrderInfo(g){const C=this.mainService.getToLocalStorage(t.g.LOCAL_CART),d={user:this.mainService.getToLocalStorage(t.g.LOCAL_USER).id,restaurantSlug:g,orderItems:[],table:"",modeOfTransaction:""};for(const l in C)if(Object.prototype.hasOwnProperty.call(C,l)){const r=C[l],o={dish:r.id,orderDishCategory:[]};for(const a in r.category){if(Object.prototype.hasOwnProperty.call(r.category,a)){const f=r.category[a];o.orderDishCategory.push({quantity:f.quantity,name:f.name,id:f.id})}d.orderItems.push(o)}}return d}createOrder(g,C,d,l){const r=this.mainService.getToLocalStorage(t.g.LOCAL_USER).jwt||"";g.table=C,g.note=d,g.modeOfTransaction=l,g.modeOfPayment="online"==l?"online":"notConfirm";const o={Authorization:`Bearer ${r}`};return _().post(t.g.BASE_URL+t.g.CREATE_ORDER_URL,g,{headers:o})}getAllTables(g){const d={Authorization:`Bearer ${this.mainService.getToLocalStorage(t.g.LOCAL_USER).jwt||""}`},l=t.g.BASE_URL+t.g.TABLE+`?slug=${g}`;return _().get(l,{headers:d})}}return b.\u0275fac=function(g){return new(g||b)(i.LFG(v.J))},b.\u0275prov=i.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})()},3707:(D,w,u)=>{u.d(w,{_:()=>d});var e=u(5e3),_=u(4987),t=u(5045),i=u(9808),v=u(508),T=u(5245);function b(l,r){if(1&l){const o=e.EpF();e.TgZ(0,"li",2)(1,"div",3),e._UZ(2,"img",4),e.qZA(),e.TgZ(3,"div",5)(4,"div")(5,"div",6)(6,"h3",7),e._uU(7),e.qZA(),e.TgZ(8,"p",8),e._uU(9),e.ALo(10,"currency"),e.qZA()(),e.TgZ(11,"p",9),e._uU(12),e.ALo(13,"currency"),e.qZA()(),e.TgZ(14,"div",10)(15,"p",11),e._uU(16),e.qZA(),e.TgZ(17,"div",12)(18,"button",13),e.NdJ("click",function(){const y=e.CHM(o).$implicit,x=e.oxw(2);return x.decreaseQuntity(x.getJsonData(y.value,"name"))}),e.TgZ(19,"mat-icon",14),e._uU(20,"remove"),e.qZA()(),e.TgZ(21,"p",15),e._uU(22),e.qZA(),e.TgZ(23,"button",16),e.NdJ("click",function(){const y=e.CHM(o).$implicit,x=e.oxw(2);return x.increaseQuntity(x.getJsonData(y.value,"name"))}),e.TgZ(24,"mat-icon",14),e._uU(25,"add"),e.qZA()()(),e.TgZ(26,"div",17)(27,"button",18),e.NdJ("click",function(){const y=e.CHM(o).$implicit,x=e.oxw(2);return x.removeDish(x.getJsonData(y.value,"name"))}),e._uU(28," Remove "),e.qZA()()()()()}if(2&l){const o=r.$implicit,a=e.oxw(2);e.xp6(2),e.Q6J("src",a.getImageUrl(a.dish),e.LSH)("alt",a.dish.name),e.xp6(5),e.hij(" ",a.dish.name," "),e.xp6(2),e.Oqu(e.xi3(10,18,a.getJsonData(o.value,"price")*a.getJsonData(o.value,"quantity"),a.dish.currency)),e.xp6(3),e.AsE(" ",a.getJsonData(o.value,"name")," /",e.xi3(13,21,a.getJsonData(o.value,"price"),a.dish.currency)," "),e.xp6(3),e.Q6J("ngClass","Veg"==a.dish.type?"bg-green-100 text-green-800":"bg-red-100 text-red-500"),e.xp6(1),e.Oqu(a.type),e.xp6(2),e.Q6J("matRippleCentered",!1)("matRippleDisabled",!1)("matRippleUnbounded",!1),e.xp6(4),e.Oqu(a.getJsonData(o.value,"quantity")||0),e.xp6(1),e.Q6J("matRippleCentered",!1)("matRippleDisabled",!1)("matRippleUnbounded",!1),e.xp6(4),e.Q6J("matRippleCentered",!1)("matRippleDisabled",!1)("matRippleUnbounded",!1)}}function E(l,r){if(1&l&&(e.ynx(0),e.YNc(1,b,29,24,"li",1),e.ALo(2,"keyvalue"),e.BQk()),2&l){const o=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,o.dish.category))}}function g(l,r){if(1&l){const o=e.EpF();e.TgZ(0,"ul",20)(1,"li",21)(2,"div",22),e._UZ(3,"img",23),e.qZA(),e.TgZ(4,"div",24)(5,"div",17)(6,"div",25)(7,"h4",26)(8,"div",27),e._uU(9),e.qZA()(),e.TgZ(10,"p",28),e._uU(11),e.ALo(12,"currency"),e.qZA()(),e.TgZ(13,"div",29)(14,"button",30),e.NdJ("click",function(){const y=e.CHM(o).$implicit,x=e.oxw(2);return x.removeDish(x.getJsonData(y.value,"name"))}),e.TgZ(15,"span",31),e._uU(16,"Remove"),e.qZA(),e.O4$(),e.TgZ(17,"svg",32),e._UZ(18,"path",33),e.qZA()()()(),e.kcU(),e.TgZ(19,"div",34)(20,"div",35)(21,"button",36),e.NdJ("click",function(){const y=e.CHM(o).$implicit,x=e.oxw(2);return x.decreaseQuntity(x.getJsonData(y.value,"name"))}),e.TgZ(22,"mat-icon",37),e._uU(23,"remove"),e.qZA()(),e.TgZ(24,"p",38),e._uU(25),e.qZA(),e.TgZ(26,"button",39),e.NdJ("click",function(){const y=e.CHM(o).$implicit,x=e.oxw(2);return x.increaseQuntity(x.getJsonData(y.value,"name"))}),e.TgZ(27,"mat-icon",40),e._uU(28,"add"),e.qZA()()(),e.TgZ(29,"p",41),e._uU(30),e.ALo(31,"currency"),e.qZA()()()()()}if(2&l){const o=r.$implicit,a=e.oxw(2);e.xp6(3),e.Q6J("src",a.getImageUrl(a.dish),e.LSH)("alt",a.dish.name),e.xp6(6),e.hij("",a.dish.name," "),e.xp6(2),e.lnq("",a.getJsonData(o.value,"name"),"\xa0\ufe52\xa0",a.type,"\xa0\ufe52\xa0",e.xi3(12,17,a.getJsonData(o.value,"price"),a.dish.currency),""),e.xp6(3),e.Q6J("matRippleCentered",!1)("matRippleDisabled",!1)("matRippleUnbounded",!1),e.xp6(8),e.Q6J("matRippleCentered",!1)("matRippleDisabled",!1)("matRippleUnbounded",!1),e.xp6(3),e.Oqu(a.getJsonData(o.value,"quantity")||0),e.xp6(2),e.Q6J("matRippleCentered",!1)("matRippleDisabled",!1)("matRippleUnbounded",!1),e.xp6(3),e.Oqu(e.xi3(31,20,a.getJsonData(o.value,"price")*a.getJsonData(o.value,"quantity"),a.dish.currency))}}function C(l,r){if(1&l&&(e.ynx(0),e.YNc(1,g,32,23,"ul",19),e.ALo(2,"keyvalue"),e.BQk()),2&l){const o=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,o.dish.category))}}let d=(()=>{class l{constructor(o){this.mainService=o,this.theme="user",this.refreshCart=new e.vpe}ngOnInit(){}getJsonData(o,a){return o[a]}getTotalPrice(){}removeDish(o){var a;const f=this.mainService.getToLocalStorage(_.g.LOCAL_CART);delete f[this.dish.id].category[o],0==(null===(a=Object.keys(f[this.dish.id].category))||void 0===a?void 0:a.length)&&delete f[this.dish.id],this.mainService.setToLocalStorage(f,_.g.LOCAL_CART),this.refreshCart.emit(parseInt(this.dish.id))}increaseQuntity(o){const a=this.mainService.getToLocalStorage(_.g.LOCAL_CART);a[this.dish.id].category[o].quantity++,this.mainService.setToLocalStorage(a,_.g.LOCAL_CART),this.refreshCart.emit(parseInt(this.dish.id))}decreaseQuntity(o){const a=this.mainService.getToLocalStorage(_.g.LOCAL_CART);let f=a[this.dish.id].category[o].quantity;f--,0==f?this.removeDish(o):(a[this.dish.id].category[o].quantity--,this.mainService.setToLocalStorage(a,_.g.LOCAL_CART),this.refreshCart.emit(parseInt(this.dish.id)))}getImageUrl(o){var a;if("object"==typeof o.image){let f=_.g.IMAGE_JSON_STRUCTURE_WITH_ATTRIBUTE;return(null===(a=o.image[0])||void 0===a?void 0:a.url)&&(f=_.g.IMAGE_JSON_STRUCTURE_WITHOUT_ATTRIBUTE),this.mainService.getImageUrl(o.image?o.image[0]:"",f)}return o.image}}return l.\u0275fac=function(o){return new(o||l)(e.Y36(t.J))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-cart-card"]],inputs:{dish:"dish",type:"type",theme:"theme"},outputs:{refreshCart:"refreshCart"},decls:2,vars:2,consts:[[4,"ngIf"],["class","py-6 flex border-b dark:border-gray-700",4,"ngFor","ngForOf"],[1,"py-6","flex","border-b","dark:border-gray-700"],[1,"flex-shrink-0","w-24","h-24","rounded-lg","overflow-hidden"],["loading","lazy",1,"w-full","h-full","object-center","object-cover",3,"src","alt"],[1,"ml-4","flex-1","flex","flex-col"],[1,"flex","justify-between","text-base","font-medium","text-gray-900","dark:text-white"],[1,"capitalize"],[1,"ml-4","text-red-500","dark:text-red-700"],[1,"mt-1","text-sm","text-gray-500","dark:text-gray-400"],[1,"flex-1","flex","items-center","justify-between","text-sm","mt-2"],[1,"text-gray-500","px-1.5","py-1","rounded-full","text-xs",3,"ngClass"],[1,"flex","items-center","space-x-3","border-2","dark:border-gray-700","rounded-full"],["matRipple","",1,"bg-lime-500","dark:bg-lime-500","cursor-pointer","rounded-full","flex","justify-center","items-center","w-8","h-8","active:bg-lime-700","dark:active:bg-lime-800","custom-ripple",3,"matRippleCentered","matRippleDisabled","matRippleUnbounded","click"],[1,"text-white"],[1,"text-gray-500","text-sm","dark:text-gray-100"],["matRipple","",1,"ml-4","bg-lime-500","dark:bg-lime-500","cursor-pointer","rounded-full","flex","justify-center","items-center","w-8","h-8","active:bg-lime-700","dark:active:bg-lime-800","custom-ripple",3,"matRippleCentered","matRippleDisabled","matRippleUnbounded","click"],[1,"flex"],["type","button","matRipple","",1,"font-medium","text-lime-500","hover:text-lime-500","p-2","rounded-full","custom-ripple",3,"matRippleCentered","matRippleDisabled","matRippleUnbounded","click"],["role","list","class","divide-y divide-gray-200 border-b",4,"ngFor","ngForOf"],["role","list",1,"divide-y","divide-gray-200","border-b"],[1,"flex","py-6"],[1,"flex-shrink-0"],["loading","lazy",1,"w-20","h-20","object-cover","rounded-md",3,"src","alt"],[1,"ml-6","flex-1","flex","flex-col"],[1,"min-w-0","flex-1"],[1,"text-sm"],[1,"font-medium","text-gray-700","hover:text-gray-800","capitalize"],[1,"mt-1","text-sm","text-gray-500"],[1,"ml-4","flex-shrink-0","flow-root"],["type","button","matRipple","",1,"-m-2.5","bg-white","p-2.5","flex","items-center","justify-center","text-gray-400","hover:text-gray-500","custom-ripple",3,"matRippleCentered","matRippleDisabled","matRippleUnbounded","click"],[1,"sr-only"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor","aria-hidden","true",1,"h-5","w-5"],["fill-rule","evenodd","d","M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule","evenodd"],[1,"flex-1","pt-2","flex","items-end","justify-between"],[1,"flex","items-center","overflow-hidden","space-x-3","border","rounded-md"],[1,"cursor-pointer","bg-gray-100","hover:bg-gray-200","flex","justify-center","items-center","w-6","h-6",3,"click"],["matRipple","",1,"text-gray-400","hover:text-gray-500","rounded-full","custom-ripple",3,"matRippleCentered","matRippleDisabled","matRippleUnbounded"],[1,"text-gray-500","text-sm"],[1,"ml-4","bg-gray-100","cursor-pointer","hover:bg-gray-200","flex","justify-center","items-center","w-6","h-6",3,"click"],["matRipple","",1,"text-gray-400","hover:text-gray-500","custom-ripple",3,"matRippleCentered","matRippleDisabled","matRippleUnbounded"],[1,"mt-1","text-sm","font-medium","text-red-500"]],template:function(o,a){1&o&&(e.YNc(0,E,3,3,"ng-container",0),e.YNc(1,C,3,3,"ng-container",0)),2&o&&(e.Q6J("ngIf","user"==a.theme),e.xp6(1),e.Q6J("ngIf","admin"==a.theme))},directives:[i.O5,i.sg,i.mk,v.wG,T.Hw],pipes:[i.Nd,i.H9],styles:[""]}),l})()},4011:(D,w,u)=>{u.d(w,{_:()=>_});var e=u(5e3);let _=(()=>{class t{constructor(v){this.elementRef=v,this.clickOutside=new e.vpe}onClick(v){this.elementRef.nativeElement.contains(v)||this.clickOutside.emit()}}return t.\u0275fac=function(v){return new(v||t)(e.Y36(e.SBq))},t.\u0275dir=e.lG2({type:t,selectors:[["","clickOutside",""]],hostBindings:function(v,T){1&v&&e.NdJ("click",function(E){return T.onClick(E.target)},!1,e.evT)},outputs:{clickOutside:"clickOutside"}}),t})()},9421:(D,w,u)=>{u.d(w,{D:()=>C});var e=u(3877),_=u(8966),t=u(4987),i=u(5e3),v=u(5045),T=u(9808),b=u(5245);function E(d,l){if(1&d){const r=i.EpF();i.TgZ(0,"div",9)(1,"label",10),i.O4$(),i.TgZ(2,"svg",11),i._UZ(3,"path",12),i.qZA(),i.kcU(),i.TgZ(4,"span",13),i._uU(5,"Click to upload image"),i.qZA()(),i.TgZ(6,"input",14),i.NdJ("change",function(a){return i.CHM(r),i.oxw().fileChangeEvent(a)}),i.qZA()()}}function g(d,l){if(1&d){const r=i.EpF();i.TgZ(0,"div")(1,"div",15)(2,"button",16),i.NdJ("click",function(){return i.CHM(r),i.oxw().rotateLeft()}),i.TgZ(3,"mat-icon",17),i._uU(4,"rotate_90_degrees_ccw"),i.qZA()(),i.TgZ(5,"button",18),i.NdJ("click",function(){return i.CHM(r),i.oxw().rotateRight()}),i.TgZ(6,"mat-icon",17),i._uU(7,"rotate_90_degrees_cw"),i.qZA()(),i.TgZ(8,"button",18),i.NdJ("click",function(){return i.CHM(r),i.oxw().flipHorizontal()}),i.TgZ(9,"mat-icon",19),i._uU(10,"flip"),i.qZA()(),i.TgZ(11,"button",18),i.NdJ("click",function(){return i.CHM(r),i.oxw().flipVertical()}),i.TgZ(12,"mat-icon",17),i._uU(13,"flip"),i.qZA()(),i.TgZ(14,"button",18),i.NdJ("click",function(){return i.CHM(r),i.oxw().zoomOut()}),i.TgZ(15,"mat-icon",17),i._uU(16,"zoom_out"),i.qZA()(),i.TgZ(17,"button",18),i.NdJ("click",function(){return i.CHM(r),i.oxw().zoomIn()}),i.TgZ(18,"mat-icon",17),i._uU(19,"zoom_in"),i.qZA()()(),i.TgZ(20,"div",20)(21,"div",21)(22,"image-cropper",22),i.NdJ("imageCropped",function(a){return i.CHM(r),i.oxw().imageCropped(a)})("imageLoaded",function(){return i.CHM(r),i.oxw().imageLoaded()})("cropperReady",function(a){return i.CHM(r),i.oxw().cropperReady(a)})("loadImageFailed",function(){return i.CHM(r),i.oxw().loadImageFailed()}),i.qZA()(),i.TgZ(23,"div",21),i._UZ(24,"img",23),i.qZA()(),i.TgZ(25,"div",24)(26,"button",25),i.NdJ("click",function(){return i.CHM(r),i.oxw().resetImage()}),i.TgZ(27,"mat-icon",26),i._uU(28," rotate_left"),i.qZA(),i._uU(29," Reset "),i.qZA()()()}if(2&d){const r=i.oxw();i.xp6(22),i.Udp("display",r.showCropper?null:"none"),i.Q6J("imageChangedEvent",r.imageChangedEvent)("maintainAspectRatio",!0)("containWithinAspectRatio",r.containWithinAspectRatio)("aspectRatio",1)("resizeToWidth",1280)("resizeToHeight",640)("onlyScaleDown",!0)("roundCropper",!1)("canvasRotation",r.canvasRotation)("transform",r.transform)("alignImage","left"),i.xp6(2),i.Q6J("src",r.croppedImage,i.LSH)}}let C=(()=>{class d{constructor(r,o,a){this.dialogRef=r,this.data=o,this.mainService=a,this.imageChangedEvent="",this.croppedImage="",this.canvasRotation=0,this.rotation=0,this.scale=1,this.showCropper=!1,this.containWithinAspectRatio=!0,this.transform={}}ngOnInit(){}fileChangeEvent(r){this.imageSize=this.calculateImageSize(r.target.files[0]),this.imageSize<=t.g.MAX_IMAGE_SIZE_IN_MB?this.imageChangedEvent=r:this.mainService.openDialog("Error","Image size should be less than "+t.g.MAX_IMAGE_SIZE_IN_MB+" MB","E")}imageCropped(r){this.croppedImage=r.base64,this.data.image=(0,e.Ll)(this.croppedImage),this.data.base64=this.croppedImage}calculateImageSize(r){return this.data.name=r.name,this.data.type=r.type,(r.size/1024/1024).toFixed(4)}imageLoaded(){this.showCropper=!0}cropperReady(r){}loadImageFailed(){this.mainService.openDialog("Error","Image Loading failed","E")}rotateLeft(){this.canvasRotation--,this.flipAfterRotate()}rotateRight(){this.canvasRotation++,this.flipAfterRotate()}flipAfterRotate(){const r=this.transform.flipH,o=this.transform.flipV;this.transform=Object.assign(Object.assign({},this.transform),{flipH:o,flipV:r})}flipHorizontal(){this.transform=Object.assign(Object.assign({},this.transform),{flipH:!this.transform.flipH})}flipVertical(){this.transform=Object.assign(Object.assign({},this.transform),{flipV:!this.transform.flipV})}resetImage(){this.scale=1,this.rotation=0,this.canvasRotation=0,this.transform={}}zoomOut(){this.scale-=.1,this.transform=Object.assign(Object.assign({},this.transform),{scale:this.scale})}zoomIn(){this.scale+=.1,this.transform=Object.assign(Object.assign({},this.transform),{scale:this.scale})}toggleContainWithinAspectRatio(){this.containWithinAspectRatio=!this.containWithinAspectRatio}updateRotation(){this.transform=Object.assign(Object.assign({},this.transform),{rotate:this.rotation})}closeModal(){this.dialogRef.close()}clear(){this.scale=1,this.rotation=0,this.canvasRotation=0,this.transform={},this.imageChangedEvent=null}}return d.\u0275fac=function(r){return new(r||d)(i.Y36(_.so),i.Y36(_.WI),i.Y36(v.J))},d.\u0275cmp=i.Xpm({type:d,selectors:[["app-edit-image-modal"]],decls:13,vars:4,consts:[[1,"bg-gray-100","px-5","py-4","flex","justify-between","items-center"],[1,"font-bold"],["type","button",1,"inline-flex","justify-center","rounded-md","border","border-gray-300","shadow-sm","px-4","py-2","bg-white","text-base","font-medium","text-gray-700","focus:outline-none","sm:mt-0","sm:ml-3","sm:w-auto","sm:text-sm",3,"click"],[1,"bg-white","p-6",2,"background","repeating-conic-gradient(rgb(246, 246, 249) 0%, rgb(246, 246, 249) 25%, transparent 0%, transparent 50%) 50% center / 20px 20px"],["class","block w-full border-2 border-gray-300 border-dashed rounded-lg p-12 text-center hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-lime-500",4,"ngIf"],[4,"ngIf"],[1,"bg-gray-100","px-5","py-4","flex","justify-between"],[1,"py-2","px-4","border","border-lime-500","text-sm","font-medium","rounded-md","text-lime-500","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-lime-500",3,"click"],[1,"disabled:bg-lime-400","cursor-pointer","py-2","px-4","border","border-transparent","text-sm","font-medium","rounded-md","text-white","bg-lime-600","hover:bg-lime-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-lime-500",3,"disabled","mat-dialog-close"],[1,"block","w-full","border-2","border-gray-300","border-dashed","rounded-lg","p-12","text-center","hover:border-gray-400","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-lime-500"],["for","upload-photo"],["xmlns","http://www.w3.org/2000/svg","stroke","currentColor","fill","none","viewBox","0 0 48 48","aria-hidden","true",1,"mx-auto","h-12","w-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 14v20c0 4.418 7.163 8 16 8 1.381 0 2.721-.087 4-.252M8 14c0 4.418 7.163 8 16 8s16-3.582 16-8M8 14c0-4.418 7.163-8 16-8s16 3.582 16 8m0 0v14m0-4c0 4.418-7.163 8-16 8S8 28.418 8 24m32 10v6m0 0v6m0-6h6m-6 0h-6"],[1,"mt-2","block","text-sm","font-medium","text-gray-600"],["type","file","name","photo","id","upload-photo",2,"opacity","0","position","absolute","z-index","-1",3,"change"],[1,"flex","justify-between","items-center","my-6"],["type","button",1,"inline-flex","items-center","p-2","border","border-transparent","rounded-full","shadow-sm","text-white","bg-lime-600","hover:bg-lime-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-lime-500",3,"click"],[1,"text-base"],["type","button",1,"ml-4","inline-flex","items-center","p-2","border","border-transparent","rounded-full","shadow-sm","text-white","bg-lime-600","hover:bg-lime-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-lime-500",3,"click"],[1,"text-base","h-6","w-6"],[1,"grid","grid-cols-1","sm:grid-cols-2"],[1,"max-w-xs","max-h-min"],[3,"imageChangedEvent","maintainAspectRatio","containWithinAspectRatio","aspectRatio","resizeToWidth","resizeToHeight","onlyScaleDown","roundCropper","canvasRotation","transform","alignImage","imageCropped","imageLoaded","cropperReady","loadImageFailed"],["loading","lazy",3,"src"],[1,"w-full","flex","justify-center","mt-4"],[1,"flex","items-center","bg-red-600","border","border-transparent","rounded-md","shadow-sm","py-2","px-4","text-sm","text-white","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-offset-gray-50","focus:ring-red-500",3,"click"],[1,"mr-2"]],template:function(r,o){1&r&&(i.TgZ(0,"div",0)(1,"h3",1),i._uU(2,"Edit Image"),i.qZA(),i.TgZ(3,"button",2),i.NdJ("click",function(){return o.clear()}),i._uU(4,"Clear"),i.qZA()(),i.TgZ(5,"div",3),i.YNc(6,E,7,0,"div",4),i.YNc(7,g,30,14,"div",5),i.qZA(),i.TgZ(8,"div",6)(9,"button",7),i.NdJ("click",function(){return o.closeModal()}),i._uU(10," Close "),i.qZA(),i.TgZ(11,"button",8),i._uU(12," Save "),i.qZA()()),2&r&&(i.xp6(6),i.Q6J("ngIf",!o.imageChangedEvent),i.xp6(1),i.Q6J("ngIf",o.imageChangedEvent),i.xp6(4),i.Q6J("disabled",!o.croppedImage)("mat-dialog-close",o.data))},directives:[T.O5,b.Hw,e.ap,_.ZT],styles:["@media only screen and (max-width: 829px){image-cropper[_ngcontent-%COMP%]{height:-moz-fit-content!important;height:fit-content!important}}image-cropper[_ngcontent-%COMP%]{height:50vh}"]}),d})()},5748:(D,w,u)=>{u.d(w,{r:()=>E});var e=u(8966),_=u(2490),t=u(5e3),i=u(5045),v=u(5245),T=u(9808);function b(g,C){if(1&g){const d=t.EpF();t.TgZ(0,"pdf-viewer",34),t.NdJ("pagechanging",function(r){return t.CHM(d),t.oxw().pagechanging(r.target.value)})("after-load-complete",function(r){return t.CHM(d),t.oxw().afterLoadComplete(r)})("pageChange",function(r){return t.CHM(d),t.oxw().page=r})("error",function(r){return t.CHM(d),t.oxw().onError(r)}),t.qZA()}if(2&g){const d=t.oxw();t.Q6J("src",null==d.data?null:d.data.url)("rotation",0)("original-size",!1)("show-all",d.showAll)("fit-to-page",d.fitToPage)("zoom",d.zoom)("zoom-scale","page-fit")("stick-to-page",!1)("render-text",!0)("external-link-target","blank")("autoresize",!0)("page",d.page)("rotation",d.rotation)("show-borders",!1)}}let E=(()=>{class g{constructor(d,l,r){this.data=d,this.mainService=l,this.dialog=r,this.renderText=!0,this.originalSize=!1,this.fitToPage=!0,this.showAll=!0,this.autoresize=!1,this.showBorders=!0,this.renderTextModes=[0,1,2],this.renderTextMode=1,this.rotation=0,this.zoom=1,this.zoomScale="page-fit",this.pdfQuery="",this.totalPages=0,this.page=1,this.isLoaded=!1}ngOnInit(){}searchQueryChanged(d){this.pdfComponent.eventBus.dispatch("find",{query:d,type:"again",caseSensitive:!1,findPrevious:void 0,highlightAll:!0,phraseSearch:!0})}pagechanging(d){(null==d?void 0:d.pageNumber)&&(this.page=d.pageNumber)}afterLoadComplete(d){this.totalPages=d.numPages,this.isLoaded=!0}nextPage(){this.page<this.totalPages&&this.page++}prevPage(){this.totalPages>0&&this.page>1&&this.page--}changeZoomScale(d){this.pdfComponent.pdfViewer.currentScaleValue=d}onError(d){console.log("Error",d),this.mainService.openDialog("Error","Error loading pdf.","E")}}return g.\u0275fac=function(d){return new(d||g)(t.Y36(e.WI),t.Y36(i.J),t.Y36(e.uw))},g.\u0275cmp=t.Xpm({type:g,selectors:[["app-pdf-viewer"]],viewQuery:function(d,l){if(1&d&&t.Gf(_.rQ,5),2&d){let r;t.iGM(r=t.CRH())&&(l.pdfComponent=r.first)}},decls:76,vars:3,consts:[["aria-labelledby","modal-title","role","dialog","aria-modal","true",1,"fixed","z-10","inset-0","overflow-hidden","bg-gray-200"],[1,"relative","items-end","justify-center","text-center","block","p-0"],[1,"bg-white","shadow"],[1,"max-w-7xl","mx-auto","px-2","sm:px-4","lg:px-8"],[1,"flex","justify-between","h-16"],[1,"flex","px-2","lg:px-0"],[1,"hidden","lg:flex","lg:space-x-8"],["aria-label","Pagination",1,"py-3","inline-flex","-space-x-px","rounded-md","shadow-sm"],[1,"relative","inline-flex","items-center","rounded-l-md","border","border-gray-300","bg-white","px-1","py-1","text-sm","font-medium","text-gray-500","hover:bg-gray-50","focus:z-20",3,"click"],[1,"sr-only"],[1,"h-5","w-5","text-gray-500"],[1,"relative","inline-flex","items-center","rounded-r-md","border","border-gray-300","bg-white","px-1","py-1","text-sm","font-medium","text-gray-500","hover:bg-gray-50","focus:z-20",3,"click"],[1,"relative","inline-flex","items-center","border","border-gray-300","bg-white","px-1","py-1","text-sm","font-medium","text-gray-500","hover:bg-gray-50","focus:z-20",3,"click"],[1,"flex-1","flex","items-center","justify-center","px-2","lg:ml-6","lg:justify-end"],[1,"max-w-lg","w-full","lg:max-w-xs"],["for","search",1,"sr-only"],[1,"relative"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor","aria-hidden","true",1,"h-5","w-5","text-gray-400"],["fill-rule","evenodd","d","M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule","evenodd"],["id","pdfQueryInput","type","text","placeholder","Search...",1,"block","w-full","pl-10","pr-3","py-2","border","border-gray-300","rounded-md","leading-5","bg-white","placeholder-gray-500","focus:outline-none","focus:placeholder-gray-400","focus:ring-1","focus:ring-lime-500","focus:border-lime-500","sm:text-sm",3,"keyup"],[1,"ml-4","flex","items-center"],["mat-dialog-close","","type","button",1,"flex","flex-shrink-0","bg-white","p-1","text-gray-400","rounded-full","hover:text-gray-500","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-lime-500"],[1,"justify-center","items-center","text-gray-500"],[1,"pt-2"],["style","width: 100%; height: 90vh;",3,"src","rotation","original-size","show-all","fit-to-page","zoom","zoom-scale","stick-to-page","render-text","external-link-target","autoresize","page","show-borders","pagechanging","after-load-complete","pageChange","error",4,"ngIf"],[1,"fixed","z-50","bottom-2","p-4","w-full"],[1,"w-32","mx-auto"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","cursor-pointer",3,"click"],[1,"text-base"],[1,"shadow-md","block","w-full","pl-10","pr-16","py-2","border","border-gray-300","rounded-md","leading-5","bg-white","placeholder-gray-500","focus:outline-none","focus:placeholder-gray-400","focus:ring-1","focus:ring-lime-500","focus:border-lime-500","text-sm",3,"value","keyup"],[1,"absolute","inset-y-0","right-0","pr-3","flex","items-center","cursor-pointer",3,"click"],[1,"text-sm"],[1,"ml-3","text-base"],[2,"width","100%","height","90vh",3,"src","rotation","original-size","show-all","fit-to-page","zoom","zoom-scale","stick-to-page","render-text","external-link-target","autoresize","page","show-borders","pagechanging","after-load-complete","pageChange","error"]],template:function(d,l){1&d&&(t.TgZ(0,"div",0)(1,"div",1)(2,"nav",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"button",8),t.NdJ("click",function(){return l.zoom=l.zoom+.1}),t.TgZ(9,"span",9),t._uU(10,"Zoom In"),t.qZA(),t.TgZ(11,"mat-icon",10),t._uU(12,"zoom_in"),t.qZA()(),t.TgZ(13,"button",11),t.NdJ("click",function(){return l.zoom=l.zoom-.1}),t.TgZ(14,"span",9),t._uU(15,"Zoom Out"),t.qZA(),t.TgZ(16,"mat-icon",10),t._uU(17,"zoom_out"),t.qZA()()(),t.TgZ(18,"div",7)(19,"button",8),t.NdJ("click",function(){return l.changeZoomScale("page-width")}),t.TgZ(20,"span",9),t._uU(21,"Fill Screen"),t.qZA(),t.TgZ(22,"mat-icon",10),t._uU(23,"zoom_out_map"),t.qZA()(),t.TgZ(24,"button",12),t.NdJ("click",function(){return l.changeZoomScale("page-height")}),t.TgZ(25,"span",9),t._uU(26,"Fit Height"),t.qZA(),t.TgZ(27,"mat-icon",10),t._uU(28,"height"),t.qZA()(),t.TgZ(29,"button",11),t.NdJ("click",function(){return l.changeZoomScale("page-fit")}),t.TgZ(30,"span",9),t._uU(31,"Fit Screen"),t.qZA(),t.TgZ(32,"mat-icon",10),t._uU(33,"fit_screen"),t.qZA()()(),t.TgZ(34,"div",7)(35,"button",8),t.NdJ("click",function(){return l.rotation=l.rotation-90}),t.TgZ(36,"span",9),t._uU(37,"rotate left"),t.qZA(),t.TgZ(38,"mat-icon",10),t._uU(39,"rotate_left"),t.qZA()(),t.TgZ(40,"button",11),t.NdJ("click",function(){return l.rotation=l.rotation+90}),t.TgZ(41,"span",9),t._uU(42,"rotate right"),t.qZA(),t.TgZ(43,"mat-icon",10),t._uU(44,"rotate_right"),t.qZA()()()()(),t.TgZ(45,"div",13)(46,"div",14)(47,"label",15),t._uU(48,"Search"),t.qZA(),t.TgZ(49,"div",16)(50,"div",17),t.O4$(),t.TgZ(51,"svg",18),t._UZ(52,"path",19),t.qZA()(),t.kcU(),t.TgZ(53,"input",20),t.NdJ("keyup",function(o){return l.searchQueryChanged(o.target.value)}),t.qZA()()()(),t.TgZ(54,"div",21)(55,"button",22)(56,"span",9),t._uU(57,"Close"),t.qZA(),t.TgZ(58,"mat-icon",23),t._uU(59,"close"),t.qZA()()()()()(),t.TgZ(60,"div",24),t.YNc(61,b,1,14,"pdf-viewer",25),t.qZA(),t.TgZ(62,"div",26)(63,"div",27)(64,"label",15),t._uU(65,"Search"),t.qZA(),t.TgZ(66,"div",16)(67,"div",28),t.NdJ("click",function(){return l.prevPage()}),t.TgZ(68,"mat-icon",29),t._uU(69,"arrow_upward"),t.qZA()(),t.TgZ(70,"input",30),t.NdJ("keyup",function(o){return l.page=o.target.value>0&&o.target.value<l.totalPages?o.target.value:l.page}),t.qZA(),t.TgZ(71,"div",31),t.NdJ("click",function(){return l.nextPage()}),t.TgZ(72,"span",32),t._uU(73),t.qZA(),t.TgZ(74,"mat-icon",33),t._uU(75,"arrow_downward"),t.qZA()()()()()()()),2&d&&(t.xp6(61),t.Q6J("ngIf",null==l.data?null:l.data.url),t.xp6(9),t.Q6J("value",l.page),t.xp6(3),t.hij("/ ",l.totalPages,""))},directives:[v.Hw,e.ZT,T.O5,_.rQ],styles:[""]}),g})()},5398:(D,w,u)=>{u.d(w,{Z:()=>M});var e=u(5e3),_=u(4987),t=u(5045),i=u(8734),v=u(9826),T=u(6444),b=u(9808),E=u(5245),g=u(3075);const C=["searchInputField"];function d(p,Z){1&p&&(e.TgZ(0,"div",3)(1,"h1",4),e._uU(2,"Loading..."),e.qZA()())}const l=function(){return["../../","dishes","add"]};function r(p,Z){1&p&&(e.TgZ(0,"div",5)(1,"button",6)(2,"mat-icon",7),e._uU(3,"lunch_dining"),e.qZA(),e.TgZ(4,"span",8),e._uU(5,"No dihes found."),e.qZA(),e.TgZ(6,"button",9),e._uU(7," Create one "),e.TgZ(8,"mat-icon",10),e._uU(9," east "),e.qZA()()()()),2&p&&(e.xp6(1),e.Q6J("routerLink",e.DdM(1,l)))}function o(p,Z){if(1&p){const n=e.EpF();e.TgZ(0,"button",23),e.NdJ("click",function(){e.CHM(n);const s=e.oxw().$implicit,m=e.oxw().$implicit;return e.oxw(2).selectedDish(m,s)}),e.TgZ(1,"div",24),e._UZ(2,"img",25),e.TgZ(3,"div",26)(4,"span",27),e._uU(5),e.qZA(),e.TgZ(6,"span",28),e._uU(7),e.qZA(),e.TgZ(8,"span",29),e._uU(9),e.ALo(10,"currency"),e.qZA()(),e.TgZ(11,"mat-icon",30),e._uU(12," add"),e.qZA()()()}if(2&p){const n=e.oxw().$implicit,c=e.oxw().$implicit,s=e.oxw(2);e.xp6(2),e.Q6J("src",null!=c&&c.image?s.getImageUrl(null==c?null:c.image[0]):"",e.LSH)("alt",c.name),e.xp6(3),e.hij(" ",null==c?null:c.name," "),e.xp6(2),e.hij(" ",null==n?null:n.name," "),e.xp6(2),e.hij(" ",e.xi3(10,5,null==n?null:n.price,null==c?null:c.currency)," ")}}function a(p,Z){if(1&p&&(e.ynx(0),e.YNc(1,o,13,8,"button",22),e.BQk()),2&p){const n=e.oxw(3);e.xp6(1),e.Q6J("ngIf","WITH_CATEGORY"==n.format)}}function f(p,Z){if(1&p){const n=e.EpF();e.TgZ(0,"button",23),e.NdJ("click",function(){e.CHM(n);const s=e.oxw().$implicit;return e.oxw(2).selectedDish(s,null)}),e.TgZ(1,"div",24),e._UZ(2,"img",31),e.TgZ(3,"div",26)(4,"span",27),e._uU(5),e.qZA()(),e.TgZ(6,"mat-icon",30),e._uU(7," add"),e.qZA()()()}if(2&p){const n=e.oxw().$implicit,c=e.oxw(2);e.xp6(2),e.Q6J("src",null!=n&&n.image?c.getImageUrl(null==n?null:n.image[0]):"",e.LSH)("alt",n.name),e.xp6(3),e.hij(" ",null==n?null:n.name," ")}}function y(p,Z){if(1&p&&(e.ynx(0),e.YNc(1,a,2,1,"ng-container",20),e.YNc(2,f,8,3,"button",22),e.BQk()),2&p){const n=Z.$implicit,c=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",n.category),e.xp6(1),e.Q6J("ngIf","WITHOUT_CATEGORY"==c.format)}}function x(p,Z){1&p&&(e.TgZ(0,"div",32)(1,"mat-icon",33),e._uU(2," no_food "),e.qZA(),e.TgZ(3,"span",34),e._uU(4," No Dishes found."),e.qZA()())}function O(p,Z){if(1&p){const n=e.EpF();e.TgZ(0,"div",11)(1,"div")(2,"form",12)(3,"label",13),e._uU(4,"Search"),e.qZA(),e.TgZ(5,"div",14)(6,"input",15,16),e.NdJ("keyup",function(s){return e.CHM(n),e.oxw().searchDish(s.target.value)}),e.qZA()()()(),e.TgZ(8,"div",17)(9,"h3",18),e._uU(10,"Result"),e.qZA(),e.TgZ(11,"ul",19),e.YNc(12,y,3,2,"ng-container",20),e.qZA(),e.YNc(13,x,5,0,"div",21),e.qZA()()}if(2&p){const n=e.oxw();e.xp6(12),e.Q6J("ngForOf",n.filteredDishes),e.xp6(1),e.Q6J("ngIf",0==(null==n.filteredDishes?null:n.filteredDishes.length))}}let M=(()=>{class p{constructor(n,c,s,m){this.mainService=n,this.adminService=c,this.route=s,this.restaurantService=m,this.format="WITH_CATEGORY",this.selectedData=new e.vpe,this.loading=!0,this._searchTerm="",this.searchingDish=!1,this.searchingDishName="",this.debounce=(h,U=700)=>{let I;return function(...R){clearTimeout(I),I=setTimeout(()=>h.apply(this,R),U)}},this.updateState=()=>{this.filteredDishes=this.filterDishes(this.searchingDishName)},this.debouncedUpdate=this.debounce(this.updateState)}ngOnInit(){const n=this.restaurantService.getRestaurantSlug();n&&this.getAllDishes(n)}ngAfterViewInit(){var n,c;null===(c=null===(n=this.searchInputField)||void 0===n?void 0:n.nativeElement)||void 0===c||c.focus()}getAllDishes(n){this.loading=!0,this.adminService.getAllDishes(n).then(c=>{var s,m;this.dishes=null===(s=null==c?void 0:c.data)||void 0===s?void 0:s.filter(h=>null==h?void 0:h.publishedAt),this.filteredDishes=null===(m=this.dishes)||void 0===m?void 0:m.slice(0,2),this.loading=!1}).catch(c=>{this.loading=!1,console.log(c),this.mainService.openDialog("Error",this.mainService.errorMessage(c),"E")})}filterDishes(n){var c,s,m;return(null===(c=this.filteredDishes)||void 0===c?void 0:c.length)==(null===(s=this.dishes)||void 0===s?void 0:s.length)?null===(m=this.dishes)||void 0===m?void 0:m.slice(0,2):this.dishes.filter(h=>h.publishedAt&&-1!=JSON.stringify(h).toLowerCase().indexOf(n.toLowerCase()))}selectedDish(n,c){this.selectedData.emit({dish:n,category:c})}get searchTerm(){return this._searchTerm}set searchTerm(n){this._searchTerm=n,this.filteredDishes=this.filterDishes(n)}searchDish(n){var c,s;this.searchingDish=!0,n&&(null==n?void 0:n.length)>=2?(this.searchingDishName=n,this.debouncedUpdate()):n&&0==(null==n?void 0:n.length)?(this.searchingDish=!1,this.filteredDishes=null===(c=this.dishes)||void 0===c?void 0:c.slice(0,2)):(this.searchingDish=!1,this.filteredDishes=null===(s=this.dishes)||void 0===s?void 0:s.slice(0,2))}getImageUrl(n){return this.mainService.getImageUrl(n,_.g.IMAGE_JSON_STRUCTURE_WITHOUT_ATTRIBUTE)}}return p.\u0275fac=function(n){return new(n||p)(e.Y36(t.J),e.Y36(i.l),e.Y36(v.gz),e.Y36(T.T))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-search-dish"]],viewQuery:function(n,c){if(1&n&&e.Gf(C,5),2&n){let s;e.iGM(s=e.CRH())&&(c.searchInputField=s.first)}},inputs:{format:"format"},outputs:{selectedData:"selectedData"},decls:3,vars:3,consts:[["class","flex justify-center items-center w-full p-4",4,"ngIf"],["class","text-center  border-gray-300 pt-42",4,"ngIf"],["class","mx-auto mt-2",4,"ngIf"],[1,"flex","justify-center","items-center","w-full","p-4"],[1,"text-xl","font-bold","text-gray-700"],[1,"text-center","border-gray-300","pt-42"],["type","button",1,"block","w-full","border-2","border-gray-300","border-dashed","rounded-lg","p-12","text-center","hover:border-gray-400","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-lime-500",3,"routerLink"],[1,"mx-auto","text-gray-600","text-5xl",2,"height","unset","width","unset"],[1,"mx-auto","mt-2","block","text-sm","font-medium","text-gray-500"],["type","button",1,"mx-auto","mt-2","inline-flex","items-center","px-4","py-2","border","border-gray-300","shadow-purple-500","shadow-sm","text-sm","font-medium","rounded-3xl","text-lime-500","bg-white","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-lime-500"],[1,"ml-2","text-lime-500","text-md",2,"height","unset","width","unset"],[1,"mx-auto","mt-2"],[1,"mt-6","sm:flex","sm:items-center"],["for","search",1,"sr-only"],[1,"relative","rounded-md","shadow-sm","sm:min-w-0","sm:flex-1"],["autofocus","","type","text","name","search","placeholder","Burger...",1,"focus:ring-lime-500","focus:border-lime-500","block","w-full","pr-32","sm:text-sm","border-gray-300","rounded-md",3,"keyup"],["searchInputField",""],[1,"mt-4"],[1,"text-xs","font-semibold","text-gray-500","uppercase","tracking-wide"],["role","list",1,"mt-4","grid","grid-cols-1","gap-4","sm:grid-cols-3","md:grid-cols-3","lg:grid-cols-4"],[4,"ngFor","ngForOf"],["class","relative block w-full border-2 border-gray-300 border-dashed rounded-lg p-12 text-center hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-lime-500",4,"ngIf"],[3,"click",4,"ngIf"],[3,"click"],[1,"cursor-pointer","bg-gray-100","p-2","w-full","flex","items-center","justify-between","rounded-full","border","border-gray-300","shadow-sm","text-left","hover:bg-gray-200","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-lime-500"],["loading","lazy",1,"h-10","w-10","object-cover","rounded-full",3,"src","alt"],[1,"flex","w-full","flex-col","ml-2"],[1,"flex","text-sm","font-medium","text-gray-900","capitalize"],[1,"flex","text-xs","font-medium","text-gray-500","capitalize"],[1,"flex","text-sm","font-medium","text-red-500"],[1,"text-md","ml-2","text-gray-500","mr-2"],["loading","lazy",1,"h-10","w-10","rounded-full","object-cover",3,"src","alt"],[1,"relative","block","w-full","border-2","border-gray-300","border-dashed","rounded-lg","p-12","text-center","hover:border-gray-400","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-lime-500"],[1,"mx-auto","h-12","w-12","text-gray-400"],[1,"mt-2","block","text-sm","font-medium","text-gray-900"]],template:function(n,c){1&n&&(e.YNc(0,d,3,0,"div",0),e.YNc(1,r,10,2,"div",1),e.YNc(2,O,14,2,"div",2)),2&n&&(e.Q6J("ngIf",c.loading),e.xp6(1),e.Q6J("ngIf",!c.loading&&0==(null==c.dishes?null:c.dishes.length)),e.xp6(1),e.Q6J("ngIf",!c.loading))},directives:[b.O5,v.rH,E.Hw,g._Y,g.JL,g.F,b.sg],pipes:[b.H9],styles:[""]}),p})()},7441:(D,w,u)=>{u.d(w,{M:()=>Z});var e=u(4987),_=u(3075),t=u(5e3),i=u(8966),v=u(1584),T=u(5045),b=u(9808),E=u(8814),g=u(4270),C=u(508);function d(n,c){1&n&&t._UZ(0,"app-loader",2)}function l(n,c){1&n&&(t.TgZ(0,"div",7)(1,"p",8),t._uU(2,"Checking Info..."),t.qZA(),t._UZ(3,"app-loader"),t.qZA())}function r(n,c){1&n&&t._UZ(0,"app-login")}function o(n,c){1&n&&(t.TgZ(0,"div",27),t._uU(1,"Username is invalid"),t.qZA())}const a=function(n){return{"border-2 border-red-500":n}};function f(n,c){if(1&n&&(t.TgZ(0,"div",24)(1,"dt",17),t._uU(2,"Username"),t.qZA(),t._UZ(3,"input",25),t.YNc(4,o,2,0,"div",26),t.qZA()),2&n){const s=t.oxw(3);let m,h;t.xp6(3),t.Q6J("ngClass",t.VKq(2,a,(null==(m=s.updateFormGroup.get("username"))?null:m.errors)&&((null==(m=s.updateFormGroup.get("username"))?null:m.touched)||(null==(m=s.updateFormGroup.get("username"))?null:m.dirty)))),t.xp6(1),t.Q6J("ngIf",(null==(h=s.updateFormGroup.get("username"))||null==h.errors?null:h.errors.required)||(null==(h=s.updateFormGroup.get("username"))||null==h.errors?null:h.errors.username))}}function y(n,c){if(1&n&&(t.TgZ(0,"div",28)(1,"dt",17),t._uU(2,"Email address"),t.qZA(),t.TgZ(3,"dd",29),t._uU(4),t.qZA()()),2&n){const s=t.oxw(3);t.xp6(4),t.Oqu(s.userData.email)}}function x(n,c){if(1&n&&(t.TgZ(0,"div",24)(1,"dt",17),t._uU(2,"Mobile Number"),t.qZA(),t.TgZ(3,"dd",29),t._uU(4),t.qZA()()),2&n){const s=t.oxw(3);t.xp6(4),t.AsE(" ",s.userData.countryCode," ",s.userData.number,"")}}const O=function(n){return{"text-lime-200 border-lime-200":n}};function M(n,c){if(1&n){const s=t.EpF();t.TgZ(0,"div",9)(1,"div",10)(2,"div")(3,"h3",11),t._uU(4,"User Information"),t.qZA(),t.TgZ(5,"p",12),t._uU(6,"Personal details."),t.qZA()(),t.TgZ(7,"button",13),t.NdJ("click",function(){return t.CHM(s),t.oxw(2).logout()}),t._uU(8," Logout "),t.qZA()(),t.TgZ(9,"div",14)(10,"form",15),t.NdJ("ngSubmit",function(){return t.CHM(s),t.oxw(2).updateUser()}),t.TgZ(11,"dl")(12,"div",16)(13,"dt",17),t._uU(14,"Full name"),t.qZA(),t._UZ(15,"input",18),t.qZA(),t.YNc(16,f,5,4,"div",19),t.YNc(17,y,5,1,"div",20),t.YNc(18,x,5,2,"div",19),t.qZA(),t.TgZ(19,"div",21)(20,"button",22),t._uU(21," Update "),t.qZA(),t.TgZ(22,"button",23),t._uU(23," Close "),t.qZA()()()()()}if(2&n){const s=t.oxw(2);t.xp6(7),t.Q6J("matRippleCentered",!1)("matRippleDisabled",!1)("matRippleUnbounded",!1),t.xp6(3),t.Q6J("formGroup",s.updateFormGroup),t.xp6(6),t.Q6J("ngIf",s.userData.username),t.xp6(1),t.Q6J("ngIf",s.userData.email),t.xp6(1),t.Q6J("ngIf",s.userData.number),t.xp6(2),t.Q6J("disabled",s.updateFormGroup.invalid)("ngClass",t.VKq(15,O,s.updateFormGroup.invalid))("matRippleCentered",!1)("matRippleDisabled",!1)("matRippleUnbounded",!1),t.xp6(2),t.Q6J("matRippleCentered",!1)("matRippleDisabled",!1)("matRippleUnbounded",!1)}}function p(n,c){if(1&n&&(t.TgZ(0,"div",3),t.YNc(1,l,4,0,"div",4),t.YNc(2,r,1,0,"app-login",5),t.YNc(3,M,24,17,"div",6),t.qZA()),2&n){const s=t.oxw();t.xp6(1),t.Q6J("ngIf",s.loading),t.xp6(1),t.Q6J("ngIf",!s.isLogin&&!s.loading),t.xp6(1),t.Q6J("ngIf",s.isLogin&&!s.loading)}}let Z=(()=>{class n{constructor(s,m,h,U){this.formBuilder=s,this.dialogRef=m,this.userService=h,this.mainService=U,this.isLogin=!1,this.loading=!0,this.updateFormGroup=this.formBuilder.group({fullName:["",[]],username:["",[_.kI.required]]}),document.body.classList.add("cdk-global-scrollblock")}ngOnInit(){this.user=this.mainService.getToLocalStorage(e.g.LOCAL_USER),this.user&&this.user.jwt?this.checkUserIsLoggedIn(this.user.jwt):this.loading=!1}checkUserIsLoggedIn(s){this.loading=!0,this.userService.checkLoggedIn(s).then(m=>{this.loading=!1,200==m.status&&m.data.id&&(this.isLogin=!0,this.userData=m.data,this.updateFormGroup.setValue({fullName:m.data.fullName,username:m.data.username})),this.loading=!1}).catch(m=>{this.loading=!1,console.log("Error",m),this.mainService.openDialog("Login Error","Invalid credential, kindly login again","E")})}updateUser(){this.loading=!0,this.user.jwt&&this.user.id?this.userService.updateMe(this.user.jwt,{fullName:this.updateFormGroup.value.fullName,username:this.updateFormGroup.value.username},this.user.id).then(m=>{this.isLogin=!0,this.user.username=this.updateFormGroup.value.username,this.user.fullName=this.updateFormGroup.value.fullName,this.mainService.setToLocalStorage(this.user,e.g.LOCAL_USER),this.loading=!1,this.mainService.openDialog("User Info","Information Updated Successfully","S",!0,!1)}).catch(m=>{this.loading=!1,console.log("Error",m),this.mainService.openDialog("Error",this.mainService.errorMessage(m),"E")}):(this.loading=!1,this.isLogin=!1)}logout(){this.mainService.logout()}getErrors(){var s,m,h,U,I,R,k,P,L,S,J,N;let A="";return((null===(s=this.updateFormGroup.get("username"))||void 0===s?void 0:s.errors)&&((null===(m=this.updateFormGroup.get("username"))||void 0===m?void 0:m.touched)||(null===(h=this.updateFormGroup.get("username"))||void 0===h?void 0:h.dirty))||(null===(U=this.updateFormGroup.get("fullName"))||void 0===U?void 0:U.errors)&&((null===(I=this.updateFormGroup.get("fullName"))||void 0===I?void 0:I.touched)||(null===(R=this.updateFormGroup.get("fullName"))||void 0===R?void 0:R.dirty)))&&((null===(P=null===(k=this.updateFormGroup.get("fullName"))||void 0===k?void 0:k.errors)||void 0===P?void 0:P.required)&&(A+="Name is required"),(null===(S=null===(L=this.updateFormGroup.get("username"))||void 0===L?void 0:L.errors)||void 0===S?void 0:S.required)&&((null==A?void 0:A.length)>0&&(A+=" & "),A+="Username is required"),(null===(N=null===(J=this.updateFormGroup.get("fullName"))||void 0===J?void 0:J.errors)||void 0===N?void 0:N.fullName)&&((null==A?void 0:A.length)>0&&(A+=" & "),A+="Name is invalid")),A}ngOnDestroy(){document.body.classList.remove("cdk-global-scrollblock")}}return n.\u0275fac=function(s){return new(s||n)(t.Y36(_.qu),t.Y36(i.so),t.Y36(v.K),t.Y36(T.J))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-user-info"]],decls:2,vars:2,consts:[["class","absolute top-0 left-0",4,"ngIf"],["class","bg-white dark:bg-slate-800",4,"ngIf"],[1,"absolute","top-0","left-0"],[1,"bg-white","dark:bg-slate-800"],["class","p-5 text-center",4,"ngIf"],[4,"ngIf"],["class","bg-white overflow-hidden dark:bg-slate-800",4,"ngIf"],[1,"p-5","text-center"],[1,"px-4","py-2","text-gray-800","font-medium","dark:text-white"],[1,"bg-white","overflow-hidden","dark:bg-slate-800"],[1,"flex","justify-between","px-4","py-5","sm:px-6"],[1,"text-lg","leading-6","font-medium","text-gray-900","dark:text-white"],[1,"mt-1","max-w-2xl","text-sm","text-gray-500","dark:text-gray-200"],["matRipple","",1,"focus-visible:outline-none","py-1","px-3","border","border-red-500","dark:border-red-400","text-red-500","dark:text-red-400","text-sm","font-medium","rounded-md","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-red-500","custom-ripple",3,"matRippleCentered","matRippleDisabled","matRippleUnbounded","click"],[1,"border-t","border-gray-200","dark:border-gray-700"],[3,"formGroup","ngSubmit"],[1,"px-4","py-5","sm:gap-4","sm:px-6","sm:grid","sm:grid-cols-3","dark:bg-slate-700","items-center"],[1,"text-sm","font-medium","text-gray-500","dark:text-gray-200"],["formControlName","fullName","type","text","autocomplete","given-name","placeholder","Your Name",1,"mt-1","dark:bg-slate-800","dark:text-white","dark:ring-slate-700","focus:ring-lime-500","focus:border-lime-500","block","w-full","shadow-sm","sm:text-sm","border-gray-300","dark:border-gray-700","rounded-md"],["class","bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6 dark:bg-slate-800",4,"ngIf"],["class","px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6 dark:bg-slate-700",4,"ngIf"],[1,"mt-2","flex","justify-between","px-4","py-5","sm:gap-4","sm:px-6","bg-white","dark:bg-slate-800"],["type","submit","matRipple","",1,"py-2","px-4","border","border-lime-500","dark:border-lime-400","text-sm","font-medium","rounded-md","text-lime-500","dark:text-lime-400","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-lime-500","custom-ripple",3,"disabled","ngClass","matRippleCentered","matRippleDisabled","matRippleUnbounded"],["mat-dialog-close","","matRipple","",1,"cursor-pointer","py-2","px-4","border","border-transparent","text-sm","font-medium","rounded-md","text-white","bg-lime-600","hover:bg-lime-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-lime-500","custom-ripple",3,"matRippleCentered","matRippleDisabled","matRippleUnbounded"],[1,"bg-white","px-4","py-5","sm:grid","sm:grid-cols-3","sm:gap-4","sm:px-6","dark:bg-slate-800"],["formControlName","username","type","text","name","username","autocomplete","username",1,"mt-1","dark:bg-slate-800","dark:text-white","dark:ring-slate-700","focus:ring-lime-500","focus:border-lime-500","block","w-full","shadow-sm","sm:text-sm","border-gray-300","dark:border-gray-700","rounded-md",3,"ngClass"],["class","text-red-500 text-xs pt-1",4,"ngIf"],[1,"text-red-500","text-xs","pt-1"],[1,"px-4","py-5","sm:grid","sm:grid-cols-3","sm:gap-4","sm:px-6","dark:bg-slate-700"],[1,"mt-1","text-sm","text-gray-900","sm:mt-0","sm:col-span-2","dark:text-white"]],template:function(s,m){1&s&&(t.YNc(0,d,1,0,"app-loader",0),t.YNc(1,p,4,3,"div",1)),2&s&&(t.Q6J("ngIf",m.loading),t.xp6(1),t.Q6J("ngIf",!m.loading))},directives:[b.O5,E.R,g.G,C.wG,_._Y,_.JL,_.sg,_.Fj,_.JJ,_.u,b.mk,i.ZT],styles:[""]}),n})()}}]);