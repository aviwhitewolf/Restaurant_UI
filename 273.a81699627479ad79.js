"use strict";(self.webpackChunkRestaurant=self.webpackChunkRestaurant||[]).push([[273],{3273:(Kt,J,d)=>{d.r(J),d.d(J,{OrdersModule:()=>Wt});var m=d(9808),E=d(2096),Z=d(5245),g=d(3075),p=d(2075),L=d(6895),_=d(9826),u=d(4987),h=d(5439),e=d(5e3),S=d(8734),P=d(8966),A=d(5045),$=d(158),O=d(6444),U=d(8814),G=d(5398),H=d(3707);function z(n,o){1&n&&e._UZ(0,"app-loader",3)}const W=function(){return["../../","tables","add"]};function K(n,o){1&n&&(e.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"mat-icon",8),e._uU(5," error "),e.qZA(),e.TgZ(6,"div",9)(7,"p",10),e._uU(8," To create an order, you need to create a table first. "),e.qZA(),e.TgZ(9,"button",11),e._uU(10," Create one "),e.TgZ(11,"mat-icon",12),e._uU(12," east "),e.qZA()()()()()()()),2&n&&(e.xp6(9),e.Q6J("routerLink",e.DdM(1,W)))}function X(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"app-cart-card",64),e.NdJ("refreshCart",function(i){return e.CHM(t),e.oxw(3).refreshCartItems(i)}),e.qZA()}if(2&n){const t=o.$implicit,r=e.oxw(3);let i;e.Q6J("dish",r.getJsonData(t.value))("theme","admin")("type",null==(i=r.getJsonData(t.value))?null:i.type)}}function ee(n,o){if(1&n&&(e.TgZ(0,"div",65)(1,"p",66),e._uU(2),e.TgZ(3,"span",67),e._uU(4),e.qZA()(),e.TgZ(5,"p",59),e._uU(6),e.ALo(7,"currency"),e.qZA()()),2&n){const t=o.$implicit,r=e.oxw(3);e.xp6(2),e.hij("",null==t?null:t.name," "),e.xp6(2),e.hij("(",t.rate,"%)"),e.xp6(2),e.Oqu(e.xi3(7,3,null==t?null:t.taxDue,r.getCurrency()))}}function te(n,o){if(1&n&&(e.TgZ(0,"div")(1,"div",51)(2,"div",52)(3,"div",53)(4,"ul",54),e.YNc(5,X,1,3,"app-cart-card",55),e.ALo(6,"keyvalue"),e.qZA()()()(),e.TgZ(7,"dl",56)(8,"div",57)(9,"dt",58),e._uU(10,"Subtotal"),e.qZA(),e.TgZ(11,"dd",59),e._uU(12),e.ALo(13,"currency"),e.qZA()(),e.YNc(14,ee,8,6,"div",60),e.TgZ(15,"div",61)(16,"dt",62),e._uU(17,"Total"),e.qZA(),e.TgZ(18,"dd",63),e._uU(19),e.ALo(20,"currency"),e.qZA()()()()),2&n){const t=e.oxw(2);e.xp6(5),e.Q6J("ngForOf",e.lcZ(6,4,t.cartItems)),e.xp6(7),e.Oqu(e.xi3(13,6,t.subTotal,t.getCurrency())),e.xp6(2),e.Q6J("ngForOf",t.taxes),e.xp6(5),e.Oqu(e.xi3(20,9,t.total,t.getCurrency()))}}function ne(n,o){1&n&&(e.TgZ(0,"div",68)(1,"div",69)(2,"mat-icon",70),e._uU(3," shopping_bag"),e.qZA(),e.TgZ(4,"h3",71),e._uU(5,"No items"),e.qZA(),e.TgZ(6,"p",72),e._uU(7,"Get started by searching & adding a new dish from search input. "),e.qZA()()())}function re(n,o){1&n&&(e.TgZ(0,"div",73),e._uU(1,"Number is invalid"),e.qZA())}function ie(n,o){1&n&&(e.TgZ(0,"div",73),e._uU(1,"Name is invalid "),e.qZA())}function oe(n,o){if(1&n&&(e.TgZ(0,"option",74),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("value",null==t?null:t.id),e.xp6(1),e.hij(" ",null==t?null:t.name,"")}}function le(n,o){1&n&&(e.TgZ(0,"div",73),e._uU(1," Table is invalid "),e.qZA())}const ae=function(n,o){return{"border-2 border-red-500":n,"border border-gray-300":o}},se=function(n,o){return{" border-2 border-red-500":n,"border border-gray-300":o}},de=function(n,o){return{" border-2 border-red-500":n,"border-gray-300":o}};function ue(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",13)(1,"form",14)(2,"div",15)(3,"div",16)(4,"div",17),e.NdJ("click",function(){return e.CHM(t),e.oxw().goBackback()}),e.TgZ(5,"mat-icon",18),e._uU(6," arrow_back"),e.qZA(),e._uU(7," Back "),e.qZA(),e.TgZ(8,"button",19),e.NdJ("click",function(){return e.CHM(t),e.oxw().confirmOrder()}),e.TgZ(9,"mat-icon",20),e._uU(10," save"),e.qZA(),e._uU(11," Confirm Order "),e.qZA()(),e.TgZ(12,"div",21)(13,"app-search-dish",22),e.NdJ("selectedData",function(i){return e.CHM(t),e.oxw().addDish(i)}),e.qZA()(),e.TgZ(14,"div",23)(15,"div",24)(16,"h2",25),e._uU(17,"Order summary"),e.qZA(),e.TgZ(18,"div",26),e.YNc(19,te,21,12,"div",27),e.YNc(20,ne,8,0,"div",28),e.qZA()(),e.TgZ(21,"div",29)(22,"h2",30),e._uU(23,"User information"),e.qZA(),e.TgZ(24,"div",31)(25,"div",32)(26,"label",33),e._uU(27,"Phone Number"),e.qZA(),e.TgZ(28,"div",34)(29,"div",35)(30,"div",36)(31,"label",37),e._uU(32,"Country Code"),e.qZA(),e.TgZ(33,"select",38)(34,"option"),e._uU(35,"+91"),e.qZA()()(),e._UZ(36,"input",39),e.qZA(),e.TgZ(37,"button",40),e.NdJ("click",function(){return e.CHM(t),e.oxw().searchUser()}),e.TgZ(38,"mat-icon",41),e._uU(39,"search"),e.qZA()()(),e.YNc(40,re,2,0,"div",42),e.qZA(),e.TgZ(41,"div",43)(42,"label",44),e._uU(43,"Full Name"),e.qZA(),e.TgZ(44,"div",45),e._UZ(45,"input",46),e.qZA(),e.YNc(46,ie,2,0,"div",42),e.qZA()(),e.TgZ(47,"div",47)(48,"label",48),e._uU(49,"Table Number"),e.qZA(),e.TgZ(50,"div",45)(51,"select",49),e.YNc(52,oe,2,2,"option",50),e.qZA(),e.YNc(53,le,2,0,"div",42),e.qZA()()()()()()()}if(2&n){const t=e.oxw();let r,i,l,s,a,c;e.xp6(1),e.Q6J("formGroup",t.userFormGroup),e.xp6(7),e.Q6J("disabled",t.userFormGroup.invalid||t.total<=0),e.xp6(11),e.Q6J("ngIf",t.total>0),e.xp6(1),e.Q6J("ngIf",t.total<=0),e.xp6(16),e.Q6J("ngClass",e.WLB(11,ae,(null==(r=t.userFormGroup.get("mobile"))?null:r.errors)&&((null==(r=t.userFormGroup.get("mobile"))?null:r.touched)||(null==(r=t.userFormGroup.get("mobile"))?null:r.dirty)),!(null!=(r=t.userFormGroup.get("mobile"))&&r.errors&&(null!=(r=t.userFormGroup.get("mobile"))&&r.touched||null!=(r=t.userFormGroup.get("mobile"))&&r.dirty)))),e.xp6(4),e.Q6J("ngIf",((null==(i=t.userFormGroup.get("mobile"))?null:i.touched)||(null==(i=t.userFormGroup.get("mobile"))?null:i.dirty))&&((null==(i=t.userFormGroup.get("mobile"))||null==i.errors?null:i.errors.required)||(null==(i=t.userFormGroup.get("mobile"))||null==i.errors?null:i.errors.pattern))),e.xp6(5),e.Q6J("ngClass",e.WLB(14,se,(null==(l=t.userFormGroup.get("fullName"))?null:l.errors)&&((null==(l=t.userFormGroup.get("fullName"))?null:l.touched)||(null==(l=t.userFormGroup.get("fullName"))?null:l.dirty)),!(null!=(l=t.userFormGroup.get("fullName"))&&l.errors&&(null!=(l=t.userFormGroup.get("fullName"))&&l.touched||null!=(l=t.userFormGroup.get("fullName"))&&l.dirty)))),e.xp6(1),e.Q6J("ngIf",((null==(s=t.userFormGroup.get("fullName"))?null:s.touched)||(null==(s=t.userFormGroup.get("fullName"))?null:s.dirty))&&(null==(s=t.userFormGroup.get("fullName"))||null==s.errors?null:s.errors.required)),e.xp6(5),e.Q6J("ngClass",e.WLB(17,de,(null==(a=t.userFormGroup.get("table"))?null:a.errors)&&((null==(a=t.userFormGroup.get("table"))?null:a.touched)||(null==(a=t.userFormGroup.get("table"))?null:a.dirty)),!(null!=(a=t.userFormGroup.get("table"))&&a.errors&&(null!=(a=t.userFormGroup.get("table"))&&a.touched||null!=(a=t.userFormGroup.get("table"))&&a.dirty)))),e.xp6(1),e.Q6J("ngForOf",t.tables),e.xp6(1),e.Q6J("ngIf",((null==(c=t.userFormGroup.get("table"))?null:c.touched)||(null==(c=t.userFormGroup.get("table"))?null:c.dirty))&&(null==(c=t.userFormGroup.get("table"))||null==c.errors?null:c.errors.required))}}let ce=(()=>{class n{constructor(t,r,i,l,s,a,c,f){this.formBuilder=t,this.adminService=r,this.route=i,this.dialog=l,this._location=s,this.mainService=a,this.paymentService=c,this.restaurantService=f,this.loading=!1,this.total=0,this.mobileRegrex=/^[0-9]{10}$/,this.tables=[],this.taxes=[],this.subTotal=0,this.userFormGroup=this.formBuilder.group({mobile:["",[g.kI.required,g.kI.pattern(this.mobileRegrex)]],fullName:["",[g.kI.required]],table:["",[g.kI.required]],userId:["",[]]}),this.cartItems=this.mainService.getToLocalStorage(u.g.LOCAL_CART),this.checkCartItems()&&this.calculateTotal()}ngOnInit(){this.getAllTables()}getAllTables(){this.loading=!0;const t=this.restaurantService.getRestaurantSlug();t&&this.adminService.getAllTables(t).then(r=>{var i;this.tables=null===(i=r.data)||void 0===i?void 0:i.tables,this.loading=!1}).catch(r=>{this.loading=!1,console.log("Error",r),this.mainService.openDialog("Error",this.mainService.errorMessage(r),"E")})}confirmOrder(){this.loading=!0;const t=this.restaurantService.getRestaurantSlug();if(t){const r=this.paymentService.getOrderInfo(t);r.user=this.userFormGroup.value.userId,r.userInfo={fullName:this.userFormGroup.value.fullName,number:this.userFormGroup.value.mobile,email:`${this.userFormGroup.value.mobile}@gmail.com`},r.mCreatedBy=this.mainService.getToLocalStorage(u.g.LOCAL_USER).id,r.createdAt=h().toISOString(),r.table=this.userFormGroup.value.table,r.modeOfPayment="offline",this.adminService.createOrder(r,t).then(i=>{localStorage.setItem(u.g.LOCAL_CART,""),this.loading=!1,this.userFormGroup.reset(),this.refreshCartItems(0),this.mainService.openDialog("Success","Order Created Successfully with Order id: "+i.data.orderId,"S")}).catch(i=>{this.loading=!1,console.log("Error",i),this.mainService.openDialog("Error",this.mainService.errorMessage(i),"E")})}}searchUser(){if(!this.userFormGroup.value.mobile)return;this.loading=!0;const t=this.restaurantService.getRestaurantSlug();t&&this.adminService.searchUser(this.userFormGroup.value.mobile,t).then(r=>{var i,l;this.loading=!1;const s=r.data;this.userFormGroup.patchValue({fullName:s.fullName,mobile:s.number,userId:s.id,table:null===(l=null===(i=this.userFormGroup)||void 0===i?void 0:i.value)||void 0===l?void 0:l.table})}).catch(r=>{this.loading=!1,console.log(r),this.mainService.openDialog("Error",this.mainService.errorMessage(r),"E")})}addDish(t){const{dish:r,category:i}=t;this.restaurantService.changeDishQunatityLocaly(r,i.name,1,i.price,i.id),this.refreshCartItems(0)}goBackback(){this._location.back()}getJsonData(t){return t}refreshCartItems(t){this.cartItems=this.mainService.getToLocalStorage(u.g.LOCAL_CART),this.calculateTotal()}getImageUrl(t){return this.mainService.getImageUrl(t,u.g.IMAGE_JSON_STRUCTURE_WITHOUT_ATTRIBUTE)}calculateTotal(){this.subTotal=this.restaurantService.calculateTotal(this.cartItems);const t=this.mainService.calculateTaxes(this.subTotal,this.restaurantService.getTaxes());this.total=null==t?void 0:t.total,this.taxes=null==t?void 0:t.taxes}checkCartItems(){var t;return!!(this.cartItems&&(null===(t=Object.values(this.cartItems))||void 0===t?void 0:t.length)>0)}getCurrency(){return this.restaurantService.getCurrency()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.qu),e.Y36(S.l),e.Y36(_.gz),e.Y36(P.uw),e.Y36(m.Ye),e.Y36(A.J),e.Y36($.t),e.Y36(O.T))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-create"]],decls:3,vars:3,consts:[["class","absolute top-0 left-0",4,"ngIf"],["class","bg-red-500",4,"ngIf"],["class","bg-white mt-8 pb-12 ",4,"ngIf"],[1,"absolute","top-0","left-0"],[1,"bg-red-500"],[1,"mx-auto","max-w-6xl","py-3","px-3","sm:px-6","lg:px-8"],[1,"flex","flex-wrap","items-start","justify-between"],[1,"items-start","flex","w-0","flex-1"],[1,"text-white","p-2","bg-red-600","rounded-lg",2,"height","unset","width","unset"],[1,"flex","items-center","flex-wrap","justify-between"],[1,"ml-3","font-medium","text-white"],["type","button",1,"mt-2","lg:mt-0","ml-3","mx-auto","inline-flex","items-center","px-4","py-1","border","border-red-300","shadow-lg","text-sm","font-medium","rounded-3xl","text-red-500","bg-white","hover:bg-red-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-red-500",3,"routerLink"],[1,"ml-2","text-red-500","text-md",2,"height","unset","width","unset"],[1,"bg-white","mt-8","pb-12"],[3,"formGroup"],[1,"max-w-6xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"flex","justify-between","py-4","items-center"],[1,"text-indigo-500","cursor-pointer","flex","items-center","text-sm",3,"click"],[1,"mr-2","text-base"],["type","button",1,"disabled:bg-indigo-400","inline-flex","items-center","px-4","py-2","border","border-transparent","shadow-sm","text-sm","font-medium","rounded-md","text-white","bg-indigo-600","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500",3,"disabled","click"],[1,"mr-2","text-md"],[1,"mb-6"],[3,"selectedData"],[1,"pt-6","lg:grid","lg:grid-cols-2","lg:gap-x-12","xl:gap-x-16","border-t","border-gray-300"],[1,"mt-10","lg:mt-0"],[1,"text-lg","font-medium","text-gray-900"],[1,"mt-4","bg-white","border","border-gray-200","rounded-lg","shadow-sm"],[4,"ngIf"],["class","px-4 py-6 sm:px-6",4,"ngIf"],[1,"mb-6","pb-6","mt-10","lg:mt-0"],[1,"text-lg","font-medium","text-gray-900","sm:mt-0","mt-4"],[1,"mt-4","flex","sm:flex-row","flex-col","gap-x-2"],[1,"w-full"],["for","phone-number",1,"block","text-sm","font-medium","text-gray-700"],[1,"mt-1","flex","rounded-md","shadow-sm"],[1,"relative","flex","items-stretch","flex-grow","focus-within:z-10"],[1,"absolute","inset-y-0","left-0","flex","items-center"],["for","country",1,"sr-only"],["id","country","name","country","autocomplete","country",1,"focus:ring-indigo-500","focus:border-indigo-500","h-full","py-0","pl-3","pr-7","border-transparent","bg-transparent","text-gray-500","sm:text-sm","rounded-md"],["type","number","name","phone-number","formControlName","mobile","autocomplete","none",1,"block","w-full","rounded-l-md","pl-14","text-gray-900","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm",3,"ngClass"],[1,"-ml-px","cursor-pointer","relative","inline-flex","items-center","space-x-2","px-2","border","border-gray-300","text-sm","font-medium","rounded-r-md","text-gray-700","bg-gray-50","hover:bg-gray-100",3,"click"],[1,"text-gray-500"],["class","text-red-500 text-xs pt-1",4,"ngIf"],[1,"w-full","sm:mt-0","mt-4"],["for","name",1,"block","text-sm","font-medium","text-gray-700"],[1,"mt-1"],["formControlName","fullName","type","text","id","name","name","name","autocomplete","name",1,"appearance-none","relative","block","w-full","px-3","py-2","placeholder-gray-500","text-gray-900","rounded-md","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","focus:z-10","sm:text-sm",3,"ngClass"],[1,"mt-4"],["for","table-number",1,"block","text-sm","font-medium","text-gray-700"],["name","table","autocomplete","none","formControlName","table",1,"mt-1","block","w-full","bg-white","rounded-md","shadow-sm","py-2","px-3","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm",3,"ngClass"],[3,"value",4,"ngFor","ngForOf"],[1,"px-4","sm:px-6"],[1,"mt-8"],[1,"flow-root"],["role","list",1,"-my-6","divide-y","divide-gray-200"],[3,"dish","theme","type","refreshCart",4,"ngFor","ngForOf"],[1,"mt-4","py-6","px-4","space-y-6","sm:px-6"],[1,"flex","items-center","justify-between"],[1,"text-sm"],[1,"text-sm","font-medium","text-red-500"],["class","flex pb-2 justify-between text-base text-gray-700",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-between","border-t","border-gray-200","pt-6"],[1,"text-base","font-medium"],[1,"text-base","font-medium","text-red-500"],[3,"dish","theme","type","refreshCart"],[1,"flex","pb-2","justify-between","text-base","text-gray-700"],[1,"dark:text-gray-400","flex","justify-center","items-center","text-xs","text-gray-600"],[1,"text-gray-600","font-semibold","text-xs","ml-2"],[1,"px-4","py-6","sm:px-6"],[1,"text-center"],[1,"mx-auto","h-12","w-12","text-2xl","text-gray-600"],[1,"mt-2","text-sm","font-medium","text-gray-900"],[1,"mt-1","text-sm","text-gray-500"],[1,"text-red-500","text-xs","pt-1"],[3,"value"]],template:function(t,r){1&t&&(e.YNc(0,z,1,0,"app-loader",0),e.YNc(1,K,13,2,"div",1),e.YNc(2,ue,54,20,"div",2)),2&t&&(e.Q6J("ngIf",r.loading),e.xp6(1),e.Q6J("ngIf",!r.loading&&r.tables&&0==(null==r.tables?null:r.tables.length)),e.xp6(1),e.Q6J("ngIf",!r.loading))},directives:[m.O5,U.R,Z.Hw,_.rH,g._Y,g.JL,g.sg,G.Z,m.sg,H._,g.YN,g.Kr,g.wV,g.Fj,g.JJ,g.u,m.mk,g.EJ],pipes:[m.Nd,m.H9],styles:[""]}),n})();var me=d(5861),ge=d(4847),v=d(1777),pe=d(449),fe=d(775),M=d(7446);function _e(n,o){1&n&&e._UZ(0,"app-loader",2)}function xe(n,o){if(1&n&&(e.TgZ(0,"span",44),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij("\xa0of\xa0",t.activeDateRange,"")}}function he(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",45),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).deleteMultipleOrders()}),e._uU(1),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(1),e.hij("Delete (",t.selection.selected.length,")")}}function ve(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"th",46)(1,"mat-checkbox",47),e.NdJ("change",function(i){e.CHM(t);const l=e.oxw(2);return i?l.toggleAllRows():null}),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("checked",t.selection.hasValue()&&t.isAllSelected())("indeterminate",t.selection.hasValue()&&!t.isAllSelected())("aria-label",t.checkboxLabel())}}function be(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"td",48)(1,"mat-checkbox",49),e.NdJ("click",function(i){return i.stopPropagation()})("change",function(i){const s=e.CHM(t).$implicit,a=e.oxw(2);return i?a.selection.toggle(s):null}),e.qZA()()}if(2&n){const t=o.$implicit,r=e.oxw(2);e.xp6(1),e.Q6J("checked",r.selection.isSelected(t))("aria-label",r.checkboxLabel(t))}}function we(n,o){1&n&&(e.TgZ(0,"th",46),e._uU(1,"Table No."),e.qZA())}function Te(n,o){if(1&n&&(e.TgZ(0,"td",48)(1,"p",50),e._uU(2),e.qZA()()),2&n){const t=o.$implicit;e.xp6(2),e.hij(" ",null==t||null==t.table?null:t.table.name," ")}}function ye(n,o){1&n&&(e.TgZ(0,"th",46),e._uU(1,"Full Name"),e.qZA())}const Q=function(n){return["view",n]};function Ze(n,o){if(1&n&&(e.TgZ(0,"td",48)(1,"a",51),e._uU(2),e.qZA()()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("routerLink",e.VKq(2,Q,t.id)),e.xp6(1),e.hij(" ",null==t||null==t.user?null:t.user.fullName," ")}}function Se(n,o){1&n&&(e.TgZ(0,"th",46),e._uU(1,"Total"),e.qZA())}function Ae(n,o){if(1&n&&(e.TgZ(0,"td",48)(1,"span",52),e._uU(2),e.ALo(3,"currency"),e.qZA(),e.TgZ(4,"span",53),e._uU(5),e.qZA()()),2&n){const t=o.$implicit;e.xp6(2),e.hij(" ",e.xi3(3,2,null==t?null:t.totalAmount,null==t?null:t.currency)," "),e.xp6(3),e.hij(" ",null==t?null:t.currency," ")}}function Oe(n,o){1&n&&(e.TgZ(0,"th",46),e._uU(1,"Status"),e.qZA())}const Ce=function(n,o,t,r){return{"bg-yellow-100 text-yellow-700":n,"bg-green-100 text-green-800":o,"bg-red-100 text-red-800":t,"bg-blue-100 text-blue-800":r}};function Ue(n,o){if(1&n&&(e.TgZ(0,"td",54)(1,"span",55),e._uU(2),e.qZA()()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("ngClass",e.l5B(2,Ce,"pending"==(null==t?null:t.status),"success"==(null==t?null:t.status),"failed"==(null==t?null:t.status),"refund"==(null==t?null:t.status))),e.xp6(1),e.hij(" ",null==t?null:t.status," ")}}function De(n,o){1&n&&(e.TgZ(0,"th",46),e._uU(1," Mobile "),e.qZA())}function Ne(n,o){if(1&n&&(e.TgZ(0,"td",48)(1,"div",56),e._uU(2),e.qZA()()),2&n){const t=o.$implicit;e.xp6(2),e.hij(" ",null==t||null==t.user?null:t.user.number," ")}}function Ie(n,o){1&n&&(e.TgZ(0,"th",46),e._uU(1," Date "),e.qZA())}function qe(n,o){if(1&n&&(e.TgZ(0,"td",48)(1,"time",57),e._uU(2),e.ALo(3,"date"),e.qZA()()),2&n){const t=o.$implicit;e.xp6(2),e.hij(" ",e.xi3(3,1,null==t?null:t.createdAt,"medium")," ")}}function ke(n,o){1&n&&(e.TgZ(0,"th",58),e._uU(1,"\xa0"),e.qZA())}function Re(n,o){1&n&&(e.TgZ(0,"mat-icon"),e._uU(1,"keyboard_arrow_down"),e.qZA())}function Fe(n,o){1&n&&(e.TgZ(0,"mat-icon"),e._uU(1,"keyboard_arrow_up"),e.qZA())}function Je(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"td",48)(1,"button",59),e.NdJ("click",function(i){const s=e.CHM(t).$implicit,a=e.oxw(2);return a.expandedElement=a.expandedElement===s?null:s,i.stopPropagation()}),e.YNc(2,Re,2,0,"mat-icon",60),e.YNc(3,Fe,2,0,"mat-icon",60),e.qZA()()}if(2&n){const t=o.$implicit,r=e.oxw(2);e.xp6(2),e.Q6J("ngIf",r.expandedElement!==t),e.xp6(1),e.Q6J("ngIf",r.expandedElement===t)}}function Me(n,o){if(1&n&&(e.TgZ(0,"div",65)(1,"div",66),e._UZ(2,"img",67),e.qZA(),e.TgZ(3,"div",68)(4,"a",69),e._UZ(5,"span",70),e.TgZ(6,"p",71),e._uU(7),e.qZA(),e.TgZ(8,"p",72),e._uU(9),e.qZA(),e.TgZ(10,"p",73),e._uU(11),e.ALo(12,"currency"),e.TgZ(13,"b"),e._uU(14,"="),e.qZA(),e._uU(15),e.ALo(16,"currency"),e.qZA()()()()),2&n){const t=o.$implicit,r=e.oxw().$implicit,i=e.oxw().$implicit,l=e.oxw(2);e.xp6(2),e.Q6J("src",null!=r&&null!=r.dish&&r.dish.image?l.getImageUrl(null==r||null==r.dish?null:r.dish.image[0]):"",e.LSH),e.xp6(2),e.Q6J("routerLink",e.VKq(13,Q,i.id)),e.xp6(3),e.hij(" ",null==r||null==r.dish?null:r.dish.name," "),e.xp6(2),e.hij(" ",null==t?null:t.name," "),e.xp6(2),e.AsE(" ",e.xi3(12,7,null==t?null:t.unitPrice,null==i?null:i.currency),"\xa0*\xa0",null==t?null:t.quantity,"\xa0"),e.xp6(4),e.hij("\xa0",e.xi3(16,10,null==t?null:t.totalPrice,null==i?null:i.currency)," ")}}function Qe(n,o){if(1&n&&(e.ynx(0),e.YNc(1,Me,17,15,"div",64),e.BQk()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("ngForOf",t.orderDishCategory)}}function Ye(n,o){if(1&n&&(e.TgZ(0,"td",48)(1,"div",61)(2,"div",62),e.YNc(3,Qe,2,1,"ng-container",63),e.qZA()()()),2&n){const t=o.$implicit,r=e.oxw(2);e.uIk("colspan",r.columnsToDisplayWithExpand.length),e.xp6(1),e.Q6J("@detailExpand",t==r.expandedElement?"expanded":"collapsed"),e.xp6(2),e.Q6J("ngForOf",t.orderItems)}}function Be(n,o){1&n&&e._UZ(0,"tr",74)}function Ve(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"tr",75),e.NdJ("click",function(){const l=e.CHM(t).$implicit,s=e.oxw(2);return s.expandedElement=s.expandedElement===l?null:l}),e.qZA()}if(2&n){const t=o.$implicit,r=e.oxw(2);e.ekj("example-expanded-row",r.expandedElement===t)}}function je(n,o){1&n&&e._UZ(0,"tr",76)}function Ee(n,o){if(1&n&&(e.TgZ(0,"tr",77)(1,"td",78),e._uU(2),e.qZA()()),2&n){e.oxw();const t=e.MAs(27);e.xp6(2),e.hij('No data matching the filter "',t.value,'"')}}const Le=function(){return["create"]},Pe=function(){return["expandedDetail"]};function $e(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"main",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"app-date-range",7,8),e.NdJ("data",function(i){return e.CHM(t),e.oxw().dateRangeChanged(i)}),e.qZA(),e.TgZ(6,"button",9)(7,"mat-icon",10),e._uU(8," add"),e.qZA(),e._uU(9," Create Order "),e.qZA()()(),e.TgZ(10,"div",11)(11,"h2",12),e._uU(12," Orders "),e.YNc(13,xe,2,1,"span",13),e.qZA(),e.YNc(14,he,2,1,"button",14),e.qZA(),e.TgZ(15,"div",15)(16,"div",5)(17,"div",16)(18,"div",17)(19,"div",18)(20,"label",19),e._uU(21,"Search"),e.qZA(),e.TgZ(22,"div",20)(23,"div",21),e.O4$(),e.TgZ(24,"svg",22),e._UZ(25,"path",23),e.qZA()(),e.kcU(),e.TgZ(26,"input",24,25),e.NdJ("keyup",function(i){return e.CHM(t),e.oxw().applyFilter(i)}),e.qZA()()(),e.TgZ(28,"table",26),e.ynx(29,27),e.YNc(30,ve,2,3,"th",28),e.YNc(31,be,2,2,"td",29),e.BQk(),e.ynx(32,30),e.YNc(33,we,2,0,"th",28),e.YNc(34,Te,3,1,"td",29),e.BQk(),e.ynx(35,31),e.YNc(36,ye,2,0,"th",28),e.YNc(37,Ze,3,4,"td",29),e.BQk(),e.ynx(38,32),e.YNc(39,Se,2,0,"th",28),e.YNc(40,Ae,6,5,"td",29),e.BQk(),e.ynx(41,33),e.YNc(42,Oe,2,0,"th",28),e.YNc(43,Ue,3,7,"td",34),e.BQk(),e.ynx(44,35),e.YNc(45,De,2,0,"th",28),e.YNc(46,Ne,3,1,"td",29),e.BQk(),e.ynx(47,36),e.YNc(48,Ie,2,0,"th",28),e.YNc(49,qe,4,4,"td",29),e.BQk(),e.ynx(50,37),e.YNc(51,ke,2,0,"th",38),e.YNc(52,Je,4,2,"td",29),e.BQk(),e.ynx(53,39),e.YNc(54,Ye,4,3,"td",29),e.BQk(),e.YNc(55,Be,1,0,"tr",40),e.YNc(56,Ve,1,2,"tr",41),e.YNc(57,je,1,0,"tr",42),e.YNc(58,Ee,3,1,"tr",43),e.qZA()()()()()()()}if(2&n){const t=e.oxw();e.xp6(6),e.Q6J("routerLink",e.DdM(7,Le)),e.xp6(7),e.Q6J("ngIf",t.activeDateRange),e.xp6(1),e.Q6J("ngIf",t.selection.selected.length>0),e.xp6(14),e.Q6J("dataSource",t.dataSource),e.xp6(27),e.Q6J("matHeaderRowDef",t.columnsToDisplayWithExpand),e.xp6(1),e.Q6J("matRowDefColumns",t.columnsToDisplayWithExpand),e.xp6(1),e.Q6J("matRowDefColumns",e.DdM(8,Pe))}}let Ge=(()=>{class n{constructor(t,r,i,l){this.adminService=t,this.mainService=r,this.route=i,this.restaurantService=l,this.loading=!0,this.displayedColumns=["select","fullName","totalAmount","status","table","number","createdAt"],this.columnsToDisplayWithExpand=[...this.displayedColumns,"expand"],this.selection=new pe.Ov(!0,[]),this.activeDateRange="",this.range=new g.cw({start:new g.NI(null),end:new g.NI(null)}),this.dateRange=u.g.DATE_RANGE}ngOnInit(){}ngAfterViewInit(){const t=this.restaurantService.getRestaurantSlug();t&&this.initDate(t)}dateRangeChanged(t){const r=this.restaurantService.getRestaurantSlug();r&&(this.activeDateRange=t.type,this.dateData=t,this.getMyOrders(r,h(t.start).startOf("day").toISOString(),h(t.end).endOf("day").toISOString()))}getMyOrders(t,r,i){this.loading=!0,this.adminService.getMyOrders(r,i,t).then(l=>{var s;this.orders=null===(s=null==l?void 0:l.data)||void 0===s?void 0:s.data,this.dataSource=new p.by(this.orders),this.dataSource.sort=this.sort,this.dataSource.filterPredicate=(a,c)=>-1!=JSON.stringify(a).toLowerCase().indexOf(c),this.loading=!1}).catch(l=>{this.loading=!1,console.log(l),this.mainService.openDialog("Error",this.mainService.errorMessage(l),"E")})}deleteMultipleOrders(){const t=this.restaurantService.getRestaurantSlug();if(t){this.loading=!0;const r=this.selection.selected.map(i=>i.id);this.adminService.deleteMultipleOrders(r,t).then(i=>{this.loading=!1,this.mainService.openDialog("Success","Selected order deleted successfully","S",!0,!1)}).catch(i=>{this.loading=!1,console.log(i),this.mainService.openDialog("Error",this.mainService.errorMessage(i),"E")})}}initDate(t){var r=this;return(0,me.Z)(function*(){const i=yield r.mainService.getSelectedDate();(null==i?void 0:i.start)&&(null==i?void 0:i.end)&&(null==i?void 0:i.type)&&(r.activeDateRange=i.type,r.dateData=i,r.getMyOrders(t,h(i.start).startOf("day").toISOString(),h(i.end).endOf("day").toISOString()))})()}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase()}getImageUrl(t){return this.mainService.getImageUrl(t,u.g.IMAGE_JSON_STRUCTURE_WITHOUT_ATTRIBUTE)}isAllSelected(){var t,r,i,l;return(null===(r=null===(t=this.selection)||void 0===t?void 0:t.selected)||void 0===r?void 0:r.length)===(null===(l=null===(i=this.dataSource)||void 0===i?void 0:i.data)||void 0===l?void 0:l.length)}toggleAllRows(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.dataSource.data)}checkboxLabel(t){return t?(this.selection.isSelected(t)?"deselect":"select")+" }":(this.isAllSelected()?"deselect":"select")+" all"}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(S.l),e.Y36(A.J),e.Y36(_.gz),e.Y36(O.T))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-overview"]],viewQuery:function(t,r){if(1&t&&e.Gf(ge.YE,5),2&t){let i;e.iGM(i=e.CRH())&&(r.sort=i.first)}},decls:2,vars:2,consts:[["class","absolute top-0 left-0",4,"ngIf"],["class","flex-1 pb-8 bg-gray-100 min-h-screen",4,"ngIf"],[1,"absolute","top-0","left-0"],[1,"flex-1","pb-8","bg-gray-100","min-h-screen"],[1,"pt-8"],[1,"max-w-6xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"flex","sm:flex-row","flex-col","justify-between","py-4","flex-wrap","sm:flex-nowrap"],[3,"data"],["dateRange",""],[1,"mt-2","sm:mt-0","inline-flex","justify-center","items-center","px-4","py-2","border","border-transparent","shadow-sm","text-sm","font-medium","rounded-md","text-white","bg-indigo-600","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500",3,"routerLink"],[1,"mr-2","text-md"],[1,"sm:px-6","lg:px-8","max-w-6xl","mx-auto","mt-8","px-4","flex","flex-row","justify-between","items-center"],[1,"text-lg","leading-6","font-medium","text-gray-900"],["class","lowercase text-gray-500 text-xs font-normal",4,"ngIf"],["type","button","class","inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",3,"click",4,"ngIf"],[1,"block"],[1,"flex","flex-col","mt-2"],[1,"align-middle","min-w-full","overflow-x-auto","shadow","overflow-hidden","sm:rounded-lg","bg-white"],[1,"w-full","flex","md:ml-0","px-6","py-4"],["for","search-field",1,"sr-only"],[1,"relative","w-full","text-gray-400","focus-within:text-gray-600"],["aria-hidden","true",1,"absolute","inset-y-0","left-0","flex","items-center","pointer-events-none"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor","aria-hidden","true",1,"h-5","w-5"],["fill-rule","evenodd","d","M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule","evenodd"],["name","search-field","placeholder","Search",1,"z-0","block","w-full","h-full","pl-8","pr-3","py-2","border-transparent","text-gray-900","placeholder-gray-500","focus:outline-none","focus:ring-0","focus:border-transparent","sm:text-sm",3,"keyup"],["input",""],["mat-table","","multiTemplateDataRows","","matSort","",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","table"],["matColumnDef","fullName"],["matColumnDef","totalAmount"],["matColumnDef","status"],["mat-cell","","class","px-6 py-4 whitespace-nowrap",4,"matCellDef"],["matColumnDef","number"],["matColumnDef","createdAt"],["matColumnDef","expand"],["mat-header-cell","","aria-label","row actions",4,"matHeaderCellDef"],["matColumnDef","expandedDetail"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","element-row",3,"example-expanded-row","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","example-detail-row",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[1,"lowercase","text-gray-500","text-xs","font-normal"],["type","button",1,"inline-flex","items-center","px-2.5","py-1.5","border","border-transparent","text-xs","font-medium","rounded","text-red-700","bg-red-100","hover:bg-red-200","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-red-500",3,"click"],["mat-header-cell","","mat-sort-header",""],[3,"checked","indeterminate","aria-label","change"],["mat-cell",""],[3,"checked","aria-label","click","change"],[1,"text-gray-900","truncate","group-hover:text-gray-900"],[1,"capitalize","truncate","text-indigo-500",3,"routerLink"],[1,"text-red-500"],[1,"font-bold","text-red-500"],["mat-cell","",1,"px-6","py-4","whitespace-nowrap"],[1,"capitalize","px-2","inline-flex","text-xs","leading-5","font-semibold","rounded-full",3,"ngClass"],[1,"text-gray-500"],["datetime","2020-07-11"],["mat-header-cell","","aria-label","row actions"],["mat-icon-button","","aria-label","expand row",3,"click"],[4,"ngIf"],[1,"element-detail"],[1,"py-4","px-1","grid","grid-cols-1","gap-4","sm:grid-cols-2","md:grid-cols-3"],[4,"ngFor","ngForOf"],["class","w-full relative rounded-xl border border-gray-200 px-4 py-4 shadow flex items-center space-x-3 hover:bg-gray-50 focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-indigo-500",4,"ngFor","ngForOf"],[1,"w-full","relative","rounded-xl","border","border-gray-200","px-4","py-4","shadow","flex","items-center","space-x-3","hover:bg-gray-50","focus-within:ring-2","focus-within:ring-offset-2","focus-within:ring-indigo-500"],[1,"flex-shrink-0"],["loading","lazy","alt","",1,"h-14","object-cover","w-14","rounded-full",3,"src"],[1,"flex-1","min-w-0"],[1,"focus:outline-none",3,"routerLink"],["aria-hidden","true",1,"absolute","inset-0"],[1,"text-sm","font-medium","text-gray-600","capitalize"],[1,"text-xs","font-medium","text-gray-400","capitalize"],[1,"text-red-500","text-sm","flex","flex-wrap"],["mat-header-row",""],["mat-row","",1,"element-row",3,"click"],["mat-row","",1,"example-detail-row"],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(t,r){1&t&&(e.YNc(0,_e,1,0,"app-loader",0),e.YNc(1,$e,59,9,"main",1)),2&t&&(e.Q6J("ngIf",r.loading),e.xp6(1),e.Q6J("ngIf",!r.loading))},directives:[m.O5,U.R,fe.S,_.rH,Z.Hw,p.BZ,p.w1,p.fO,p.ge,M.oG,p.Dz,p.ev,_.yS,m.mk,m.sg,p.as,p.XQ,p.nj,p.Gk,p.Ee],pipes:[m.H9,m.uU],styles:["table[_ngcontent-%COMP%]{width:100%}tr.example-detail-row[_ngcontent-%COMP%]{height:0}tr.element-row[_ngcontent-%COMP%]:not(.example-expanded-row):hover{background:whitesmoke}tr.element-row[_ngcontent-%COMP%]:not(.example-expanded-row):active{background:#efefef}.element-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0}.element-detail[_ngcontent-%COMP%]{overflow:hidden}.element-diagram[_ngcontent-%COMP%]{min-width:80px;border:2px solid black;padding:8px;font-weight:lighter;margin:8px 0}.element-symbol[_ngcontent-%COMP%]{font-weight:700;font-size:40px;line-height:normal}.element-description[_ngcontent-%COMP%]{padding:16px}.element-description-attribution[_ngcontent-%COMP%]{opacity:.5}"],data:{animation:[(0,v.X$)("detailExpand",[(0,v.SB)("collapsed",(0,v.oB)({height:"0px",minHeight:"0"})),(0,v.SB)("expanded",(0,v.oB)({height:"*"})),(0,v.eR)("expanded <=> collapsed",(0,v.jt)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),n})();var He=d(7561),Y=d(4011),ze=d(4004),We=d(1520),Ke=d(9300),Xe=d(4986),et=d(4482),B=d(5403),tt=d(8421);const V={leading:!0,trailing:!1};var rt=d(5963);var C=d(3401),j=d(5899);const ot=["scroller"];function lt(n,o){if(1&n&&(e.TgZ(0,"div",44),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.scrollToOrder())}}function at(n,o){if(1&n&&(e.TgZ(0,"div",44),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.stopScroll())}}function st(n,o){1&n&&(e.TgZ(0,"div",45),e._uU(1,"1"),e.qZA())}function dt(n,o){1&n&&(e.TgZ(0,"span",46),e.O4$(),e.TgZ(1,"svg",47),e._UZ(2,"path",48),e.qZA()())}function ut(n,o){1&n&&(e.TgZ(0,"span",49)(1,"span",50),e._uU(2,"01"),e.qZA()())}function ct(n,o){1&n&&(e.TgZ(0,"span",46),e.O4$(),e.TgZ(1,"svg",47),e._UZ(2,"path",48),e.qZA()())}function mt(n,o){1&n&&(e.TgZ(0,"span",51)(1,"span",52),e._uU(2,"02"),e.qZA()())}function gt(n,o){1&n&&(e.TgZ(0,"span",46),e.O4$(),e.TgZ(1,"svg",47),e._UZ(2,"path",48),e.qZA()())}function pt(n,o){1&n&&(e.TgZ(0,"span",51)(1,"span",52),e._uU(2,"03"),e.qZA()())}const ft=function(n){return["../",n]},_t=function(n){return{"bg-gray-100":n}},xt=function(n){return{"text-indigo-600 font-bold":n}},D=function(n){return{"text-indigo-600":n}};function ht(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.YNc(1,lt,2,1,"div",19),e.YNc(2,at,2,1,"div",19),e.TgZ(3,"li",20),e.NdJ("click",function(){return e.CHM(t),e.oxw().toggleRightSideBar(!1)}),e.TgZ(4,"div",21)(5,"p",22)(6,"b"),e._uU(7),e.qZA(),e.TgZ(8,"span",23),e._uU(9),e.qZA()(),e.TgZ(10,"div",24)(11,"p",25)(12,"span",26),e._uU(13),e.ALo(14,"currency"),e.qZA()(),e.YNc(15,st,2,0,"div",27),e.qZA(),e.TgZ(16,"div",28)(17,"span",29),e._uU(18),e.qZA()(),e.TgZ(19,"nav",30)(20,"ol",31)(21,"li",32)(22,"div",33)(23,"span",34),e.YNc(24,dt,3,0,"span",35),e.YNc(25,ut,3,0,"span",36),e.TgZ(26,"span",37),e._uU(27,"Payment"),e.qZA()()(),e.TgZ(28,"div",38),e.O4$(),e.TgZ(29,"svg",39),e._UZ(30,"path",40),e.qZA()()(),e.kcU(),e.TgZ(31,"li",32)(32,"div",41),e.YNc(33,ct,3,0,"span",35),e.YNc(34,mt,3,0,"span",42),e.TgZ(35,"span",37),e._uU(36,"Food Ready"),e.qZA()(),e.TgZ(37,"div",38),e.O4$(),e.TgZ(38,"svg",39),e._UZ(39,"path",40),e.qZA()()(),e.kcU(),e.TgZ(40,"li",32)(41,"div",43)(42,"span",34),e.YNc(43,gt,3,0,"span",35),e.YNc(44,pt,3,0,"span",42),e.TgZ(45,"span",37),e._uU(46,"Food Served"),e.qZA()()()()()()()(),e.BQk()}if(2&n){const t=o.$implicit,r=o.first,i=o.last,l=e.oxw();e.xp6(1),e.Q6J("ngIf",r),e.xp6(1),e.Q6J("ngIf",i),e.xp6(1),e.Q6J("routerLink",e.VKq(24,ft,t.id))("fragment",t.orderId),e.uIk("id",null==t?null:t.orderId),e.xp6(1),e.Q6J("ngClass",e.VKq(26,_t,(null==t?null:t.orderId)==(null==l.order?null:l.order.orderId))),e.xp6(3),e.hij("#",t.orderId,""),e.xp6(1),e.Q6J("ngClass",e.VKq(28,xt,l.checkOrderRead(null==t?null:t.metadata))),e.xp6(1),e.hij(" ",l.getDateFromTimeX(null==t?null:t.createdAt)," "),e.xp6(4),e.Oqu(e.xi3(14,21,null==t?null:t.totalAmount,t.currency)),e.xp6(2),e.Q6J("ngIf",l.checkOrderRead(null==t?null:t.metadata)),e.xp6(3),e.hij(" ",(null==t||null==t.user?null:t.user.fullName)||(null==t||null==t.user?null:t.user.email)," "),e.xp6(6),e.Q6J("ngIf",l.getStepStatus(t).payment),e.xp6(1),e.Q6J("ngIf",!l.getStepStatus(t).payment),e.xp6(1),e.Q6J("ngClass",e.VKq(30,D,!l.getStepStatus(t).payment)),e.xp6(7),e.Q6J("ngIf",l.getStepStatus(t).food&&l.getStepStatus(t).payment),e.xp6(1),e.Q6J("ngIf",!l.getStepStatus(t).food&&l.getStepStatus(t).payment),e.xp6(1),e.Q6J("ngClass",e.VKq(32,D,!l.getStepStatus(t).food&&l.getStepStatus(t).payment)),e.xp6(8),e.Q6J("ngIf",l.getStepStatus(t).delivered&&l.getStepStatus(t).food&&l.getStepStatus(t).payment),e.xp6(1),e.Q6J("ngIf",!l.getStepStatus(t).delivered&&l.getStepStatus(t).payment&&l.getStepStatus(t).food),e.xp6(1),e.Q6J("ngClass",e.VKq(34,D,!l.getStepStatus(t).delivered&&l.getStepStatus(t).payment&&l.getStepStatus(t).food))}}function vt(n,o){1&n&&(e.TgZ(0,"div",53),e._UZ(1,"mat-progress-bar",54),e.qZA())}let bt=(()=>{class n{constructor(t,r,i,l,s,a){this.adminService=t,this.route=r,this.mainService=i,this.ngZone=l,this.router=s,this.restaurantService=a,this.closeBar=new e.vpe,this.orders=[],this.page=0,this.pageSize=20,this.loading=!0,this.isLastItem=!1,this.reachedToSelectedOrder=!1,this.userId=this.mainService.getToLocalStorage(u.g.LOCAL_USER).id}ngOnInit(){var t;const r=this.restaurantService.getRestaurantSlug();r&&(null===(t=this.route)||void 0===t||t.params.subscribe(i=>{var l;const s=h(null===(l=this.order)||void 0===l?void 0:l.createdAt).toISOString(),a=h(s).subtract(30,"days").toISOString(),c=h(new Date).toISOString();this.loading=!0,this.getAllOrders(r,0,this.pageSize,a,c)}))}ngAfterViewInit(){var t;null===(t=this.scroller)||void 0===t||t.elementScrolled().pipe((0,ze.U)(()=>this.scroller.measureScrollOffset("bottom")),(0,We.G)(),(0,Ke.h)(([r,i])=>i<r&&i<140),function it(n,o=Xe.z,t=V){const r=(0,rt.H)(n,o);return function nt(n,o=V){return(0,et.e)((t,r)=>{const{leading:i,trailing:l}=o;let s=!1,a=null,c=null,f=!1;const T=()=>{null==c||c.unsubscribe(),c=null,l&&(w(),f&&r.complete())},y=()=>{c=null,f&&r.complete()},b=x=>c=(0,tt.Xf)(n(x)).subscribe((0,B.x)(r,T,y)),w=()=>{if(s){s=!1;const x=a;a=null,r.next(x),!f&&b(x)}};t.subscribe((0,B.x)(r,x=>{s=!0,a=x,(!c||c.closed)&&(i?w():b(x))},()=>{f=!0,(!(l&&s&&c)||c.closed)&&r.complete()}))})}(()=>r,t)}(700)).subscribe(()=>{this.ngZone.run(()=>{this.isLastItem||(this.loading=!0,this.page=this.page+1,this.nextBatch(this.page))})})}getAllOrders(t,r,i,l="",s=""){this.adminService.getMyOrders(l,s,t,r,i).then(a=>{var c,f,T,y,b,w,x,I,q,k,R;0==(null===(f=null===(c=null==a?void 0:a.data)||void 0===c?void 0:c.data)||void 0===f?void 0:f.length)&&(this.isLastItem=!0),this.orders=this.orders.concat(a.data.data),this.loading=!1;let F=null;null!=(null===(b=null===(y=null===(T=null==a?void 0:a.data)||void 0===T?void 0:T.meta)||void 0===y?void 0:y.pagination)||void 0===b?void 0:b.pageCount)&&null!=(null===(I=null===(x=null===(w=null==a?void 0:a.data)||void 0===w?void 0:w.meta)||void 0===x?void 0:x.pagination)||void 0===I?void 0:I.pageCount)&&(F=null===(R=null===(k=null===(q=null==a?void 0:a.data)||void 0===q?void 0:q.meta)||void 0===k?void 0:k.pagination)||void 0===R?void 0:R.pageCount),F&&F<=this.page&&(this.loading=!0,this.page=this.page+1,this.nextBatch(this.page))}).catch(a=>{this.loading=!1,console.log(a),this.mainService.openDialog("Error",this.mainService.errorMessage(a),"E")})}getStepStatus(t){let r={payment:!1,food:!1,delivered:!1};return"success"==(null==t?void 0:t.status)&&(r.payment=!0),("ready"==(null==t?void 0:t.foodStatus)||"served"==(null==t?void 0:t.foodStatus))&&(r.food=!0),"served"==(null==t?void 0:t.foodStatus)&&(r.delivered=!0),r}toggleRightSideBar(t){this.closeBar.emit(t)}nextBatch(t){var r;const i=this.restaurantService.getRestaurantSlug();i&&(null===(r=this.route)||void 0===r||r.params.subscribe(l=>{var s;this.startDate||(this.startDate=h(this.orders[(null===(s=this.orders)||void 0===s?void 0:s.length)-1].createdAt).toISOString()),this.getAllOrders(i,t,this.pageSize,this.startDate)}))}trackByOrderId(t,r){return r.orderId}scrollToFragment(t){if(this.scroller.getRenderedRange().end==t){const r=this.router.parseUrl(this.router.url).fragment;if(r){const i=document.getElementById(r);i&&i.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}}}checkOrderRead(t){return!(null==t?void 0:t.readBy[this.userId])}getDateFromTimeX(t){return h(t).fromNow()}scrollToOrder(){if(!this.reachedToSelectedOrder){const t=this.binarySearch();t>-1&&(document.getElementById(this.order.orderId),this.scroller.scrollToIndex(t))}}stopScroll(){this.reachedToSelectedOrder||(this.reachedToSelectedOrder=!0)}binarySearch(){var t;let r=0,i=(null===(t=this.orders)||void 0===t?void 0:t.length)-1;for(;r<=i;){let l=Math.floor(r+(i-r)/2);if(this.orders[l].id==this.order.id)return l;this.order.id<this.orders[l].id?r=l+1:i=l-1}return-1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(S.l),e.Y36(_.gz),e.Y36(A.J),e.Y36(e.R0b),e.Y36(_.F0),e.Y36(O.T))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-right-side-bar"]],viewQuery:function(t,r){if(1&t&&e.Gf(ot,5),2&t){let i;e.iGM(i=e.CRH())&&(r.scroller=i.first)}},inputs:{order:"order"},outputs:{closeBar:"closeBar"},decls:21,vars:3,consts:[["aria-labelledby","slide-over-title","role","dialog","aria-modal","true",1,"fixed","inset-0","overflow-hidden","z-50"],[1,"absolute","inset-0","overflow-hidden"],["aria-hidden","true",1,"absolute","inset-0"],[1,"fixed","inset-y-0","right-0","max-w-full","flex",3,"clickOutside"],[1,"w-screen","max-w-md"],[1,"h-full","flex","flex-col","bg-white","shadow-xl","overflow-y-scroll"],[1,"p-6","shadow"],[1,"flex","items-start","justify-between"],["id","slide-over-title",1,"text-lg","font-medium","text-gray-900"],[1,"ml-3","h-7","flex","items-center"],["type","button",1,"bg-white","rounded-md","text-gray-400","hover:text-gray-500","focus:ring-2","focus:ring-indigo-500",3,"click"],[1,"sr-only"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","aria-hidden","true",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],["itemSize","200",1,"content"],["scroller",""],["role","list",1,"border-t","border-gray-200","flex-1","divide-y","divide-gray-200","overflow-y-auto"],[4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],["class","flex w-full justify-center items-center mb-12",4,"ngIf"],["hidden","","class","hidden",4,"ngIf"],[1,"cursor-pointer","hover:shadow-md",3,"routerLink","fragment","click"],[1,"relative","group","p-5",3,"ngClass"],[1,"flex","justify-between","items-center","my-2","text-gray-700","text-xs"],[1,"mt-2","text-gray-500","text-xs",3,"ngClass"],[1,"flex","justify-between"],[1,"text-red-500"],[1,"font-bold"],["class","w-5 h-5 flex justify-center items-center text-center shadow-m text-white text-xs bg-indigo-600 rounded-full",4,"ngIf"],[1,"flex","justify-between","items-center","mt-2"],[1,"text-xs","font-semibold","text-gray-800"],["aria-label","Progress",1,"mt-4"],["role","list",1,"border","border-gray-300","rounded-md","divide-y","divide-gray-300","md:flex","md:divide-y-0"],[1,"relative","md:flex-1","md:flex"],[1,"group","flex","items-center","w-full"],[1,"px-4","py-2","flex","items-center","text-sm","font-medium"],["class","flex-shrink-0 w-6 h-6 flex items-center justify-center bg-green-600 rounded-full ",4,"ngIf"],["class","flex-shrink-0 w-6 h-6 flex items-center justify-center border-2 border-indigo-600 rounded-full",4,"ngIf"],[1,"ml-2","text-xs","font-medium","text-gray-500",3,"ngClass"],["aria-hidden","true",1,"hidden","md:block","absolute","top-0","right-0","h-full","w-5"],["viewBox","0 0 22 80","fill","none","preserveAspectRatio","none",1,"h-full","w-full","text-gray-300"],["d","M0 -2L20 40L0 82","vector-effect","non-scaling-stroke","stroke","currentcolor","stroke-linejoin","round"],["aria-current","step",1,"px-4","py-2","flex","items-center","text-sm","font-medium"],["class","flex-shrink-0 w-6 h-6 flex items-center justify-center border-2 border-indigo-600 text-indigo-600 rounded-full",4,"ngIf"],[1,"group","flex","items-center"],["hidden","",1,"hidden"],[1,"w-5","h-5","flex","justify-center","items-center","text-center","shadow-m","text-white","text-xs","bg-indigo-600","rounded-full"],[1,"flex-shrink-0","w-6","h-6","flex","items-center","justify-center","bg-green-600","rounded-full"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor","aria-hidden","true",1,"w-4","h-4","text-white"],["fill-rule","evenodd","d","M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule","evenodd"],[1,"flex-shrink-0","w-6","h-6","flex","items-center","justify-center","border-2","border-indigo-600","rounded-full"],[1,"text-indigo-600","text-xs"],[1,"flex-shrink-0","w-6","h-6","flex","items-center","justify-center","border-2","border-indigo-600","text-indigo-600","rounded-full"],[1,"text-xs"],[1,"flex","w-full","justify-center","items-center","mb-12"],["mode","indeterminate"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e.NdJ("clickOutside",function(){return r.toggleRightSideBar(!1)}),e.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"h2",8),e._uU(9,"Orders"),e.qZA(),e.TgZ(10,"div",9)(11,"button",10),e.NdJ("click",function(){return r.toggleRightSideBar(!1)}),e.TgZ(12,"span",11),e._uU(13,"Close panel"),e.qZA(),e.O4$(),e.TgZ(14,"svg",12),e._UZ(15,"path",13),e.qZA()()()()(),e.kcU(),e.TgZ(16,"cdk-virtual-scroll-viewport",14,15)(18,"ul",16),e.YNc(19,ht,47,36,"ng-container",17),e.qZA(),e.YNc(20,vt,2,0,"div",18),e.qZA()()()()()()()),2&t&&(e.xp6(19),e.Q6J("cdkVirtualForOf",r.orders)("cdkVirtualForTrackBy",r.trackByOrderId),e.xp6(1),e.Q6J("ngIf",r.loading))},directives:[Y._,C.N7,C.xd,C.x0,m.O5,_.rH,m.mk,j.pW],pipes:[m.H9],styles:['.content[_ngcontent-%COMP%]{height:calc(100vh - 64px);overflow:auto}@keyframes spinner{0%{transform:translate(-50%,-50%) rotate(0)}to{transform:translate(-50%,-50%) rotate(360deg)}}.spin[_ngcontent-%COMP%]:before{animation:1s linear infinite spinner;animation-play-state:inherit;border:solid 5px #cfd0d1;border-bottom-color:#4167cf;border-radius:50%;content:"";height:40px;width:40px;display:block;will-change:transform}']}),n})();const wt=["scroller"];function Tt(n,o){1&n&&e._UZ(0,"app-loader",3)}function yt(n,o){1&n&&(e.TgZ(0,"span",42),e.O4$(),e.TgZ(1,"svg",43),e._UZ(2,"path",44),e.qZA()())}function Zt(n,o){1&n&&(e.TgZ(0,"span",45)(1,"span",46),e._uU(2,"01"),e.qZA()())}function St(n,o){1&n&&(e.TgZ(0,"span",42),e.O4$(),e.TgZ(1,"svg",43),e._UZ(2,"path",44),e.qZA()())}function At(n,o){1&n&&(e.TgZ(0,"span",47)(1,"span",48),e._uU(2,"02"),e.qZA()())}function Ot(n,o){1&n&&(e.TgZ(0,"span",42),e.O4$(),e.TgZ(1,"svg",43),e._UZ(2,"path",44),e.qZA()())}function Ct(n,o){1&n&&(e.TgZ(0,"span",47)(1,"span",48),e._uU(2,"03"),e.qZA()())}function Ut(n,o){1&n&&(e.TgZ(0,"span",66),e.O4$(),e.TgZ(1,"svg",67),e._UZ(2,"path",44),e.qZA()())}const Dt=function(n,o){return{"text-white bg-indigo-600":n,"text-gray-900 hover:bg-gray-100":o}},Nt=function(n,o){return{"font-semibold":n,"font-normal":o}};function It(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li",63),e.NdJ("click",function(){const l=e.CHM(t).$implicit,s=e.oxw(2).$implicit;return e.oxw(2).changeSelectedValue(l,s.name)}),e.TgZ(1,"div",53)(2,"span",64),e._uU(3),e.qZA()(),e.YNc(4,Ut,3,0,"span",65),e.qZA()}if(2&n){const t=o.$implicit,r=e.oxw(2).$implicit,i=e.oxw(2);e.Q6J("ngClass",e.WLB(4,Dt,i.getSelectedValue(t,r.name),!i.getSelectedValue(t,r.name))),e.xp6(2),e.Q6J("ngClass",e.WLB(7,Nt,i.getSelectedValue(t,r.name),!i.getSelectedValue(t,r.name))),e.xp6(1),e.hij(" ",t," "),e.xp6(1),e.Q6J("ngIf",i.getSelectedValue(t,r.name))}}function qt(n,o){if(1&n&&(e.O4$(),e.kcU(),e.TgZ(0,"ul",61),e.YNc(1,It,5,10,"li",62),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.columns)}}const kt=function(n){return{"bg-indigo-600 border-transparent text-white hover:bg-indigo-700":n}};function Rt(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"label",68),e.NdJ("click",function(){const l=e.CHM(t).$implicit,s=e.oxw().$implicit;return e.oxw(2).changeSelectedValue(l,s.name)}),e._UZ(1,"input",69),e.TgZ(2,"p"),e._uU(3),e.qZA()()}if(2&n){const t=o.$implicit,r=e.oxw().$implicit,i=e.oxw(2);e.Q6J("ngClass",e.VKq(2,kt,i.getSelectedValue(t,r.name))),e.xp6(3),e.Oqu(t)}}function Ft(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",49)(1,"label",50),e._uU(2),e.qZA(),e.TgZ(3,"div",51)(4,"button",52),e.NdJ("click",function(){const l=e.CHM(t).$implicit;return l.showDropDown=!l.showDropDown})("clickOutside",function(){return e.CHM(t).$implicit.showDropDown=!1}),e.TgZ(5,"span",53)(6,"span",54),e._uU(7),e.qZA()(),e.TgZ(8,"span",55),e.O4$(),e.TgZ(9,"svg",56),e._UZ(10,"path",57),e.qZA()()(),e.YNc(11,qt,2,1,"ul",58),e.qZA(),e.kcU(),e.TgZ(12,"div",59),e.YNc(13,Rt,4,4,"label",60),e.qZA()()}if(2&n){const t=o.$implicit,r=e.oxw(2);e.xp6(2),e.hij(" ",t.name,""),e.xp6(5),e.hij(" ",r.dropDownSelectedValue[t.name]," "),e.xp6(4),e.Q6J("ngIf",t.showDropDown),e.xp6(2),e.Q6J("ngForOf",t.columns)}}function Jt(n,o){if(1&n&&(e.TgZ(0,"div",71)(1,"span",76),e._uU(2),e.TgZ(3,"span",77),e._uU(4),e.qZA()(),e.TgZ(5,"div",78),e._uU(6),e.ALo(7,"currency"),e.qZA()()),2&n){const t=o.$implicit,r=e.oxw(3);e.xp6(2),e.hij("",t.name," "),e.xp6(2),e.hij("(",t.rate,"%)"),e.xp6(2),e.hij(" ",e.xi3(7,3,null==t?null:t.taxDue,r.order.currency)," ")}}function Mt(n,o){if(1&n&&(e.TgZ(0,"li",80)(1,"div",81),e._UZ(2,"img",82),e.qZA(),e.TgZ(3,"div",83)(4,"div",84)(5,"div")(6,"div",85)(7,"h3",86)(8,"span",87),e._uU(9),e.qZA()(),e.TgZ(10,"span",88),e._uU(11),e.qZA()(),e.TgZ(12,"div",89)(13,"p",90),e._uU(14),e.ALo(15,"currency"),e.qZA()()(),e.TgZ(16,"div",91)(17,"div",92),e._uU(18),e.qZA(),e.TgZ(19,"div",93),e._uU(20),e.ALo(21,"currency"),e.qZA()()()()()),2&n){const t=o.$implicit,r=e.oxw().$implicit,i=e.oxw(3);e.xp6(2),e.Q6J("src",null!=r&&null!=r.dish&&r.dish.image?i.getImageUrl(null==r||null==r.dish?null:r.dish.image[0]):"",e.LSH)("alt",null==r||null==r.dish?null:r.dish.name),e.xp6(7),e.hij("",null==r||null==r.dish?null:r.dish.name," "),e.xp6(2),e.hij("",null==t?null:t.name," "),e.xp6(3),e.Oqu(e.xi3(15,7,null==t?null:t.unitPrice,i.order.currency)),e.xp6(4),e.hij(" ",null==t?null:t.quantity," "),e.xp6(2),e.hij(" ",e.xi3(21,10,null==t?null:t.totalPrice,i.order.currency)," ")}}function Qt(n,o){if(1&n&&(e.ynx(0),e.YNc(1,Mt,22,13,"li",79),e.BQk()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("ngForOf",t.orderDishCategory)}}function Yt(n,o){if(1&n&&(e.TgZ(0,"ul",70)(1,"div",71)(2,"span",72),e._uU(3,"Total"),e.qZA(),e.TgZ(4,"div",73),e._uU(5),e.ALo(6,"currency"),e.qZA()(),e.YNc(7,Jt,8,6,"div",74),e.YNc(8,Qt,2,1,"ng-container",75),e.qZA()),2&n){const t=e.oxw(2);e.xp6(5),e.hij(" ",e.xi3(6,3,null==t.order?null:t.order.totalAmount,t.order.currency)," "),e.xp6(2),e.Q6J("ngForOf",null==t.order?null:t.order.taxes),e.xp6(1),e.Q6J("ngForOf",t.order.orderItems)}}function Bt(n,o){if(1&n&&(e.TgZ(0,"div",97)(1,"dt",98),e._uU(2,"Table Number"),e.qZA(),e.TgZ(3,"dd",99),e._uU(4),e.qZA()()),2&n){const t=e.oxw(3);e.xp6(4),e.Oqu(null==t.order||null==t.order.table?null:t.order.table.name)}}const Vt=function(n,o,t,r){return{"bg-yellow-100 text-yellow-700":n,"bg-green-100 text-green-800":o,"bg-red-100 text-red-800":t,"bg-blue-100 text-blue-800":r}},jt=function(n,o,t,r){return{"bg-yellow-100 text-yellow-700":n,"bg-green-100 text-green-800":o,"bg-red-100 text-red-800":t,"bg-orange-100 text-orange-800":r}};function Et(n,o){if(1&n&&(e.TgZ(0,"div",94)(1,"h2",95),e._uU(2,"Order Info"),e.qZA(),e.TgZ(3,"dl",96)(4,"div",97)(5,"dt",98),e._uU(6,"Order Id"),e.qZA(),e.TgZ(7,"dd",99),e._uU(8),e.qZA()(),e.TgZ(9,"div",97)(10,"dt",98),e._uU(11,"Payment Status"),e.qZA(),e.TgZ(12,"dd",100),e._uU(13),e.qZA()(),e.TgZ(14,"div",97)(15,"dt",98),e._uU(16,"Food Status"),e.qZA(),e.TgZ(17,"dd",100),e._uU(18),e.qZA()(),e.YNc(19,Bt,5,1,"div",101),e.TgZ(20,"div",97)(21,"dt",98),e._uU(22,"Preparation Time"),e.qZA(),e.TgZ(23,"dd",99),e._uU(24),e.qZA()(),e.TgZ(25,"div",97)(26,"dt",98),e._uU(27,"Last Updated"),e.qZA(),e.TgZ(28,"dd",99),e._uU(29),e.ALo(30,"date"),e.qZA()(),e.TgZ(31,"div",97)(32,"dt",98),e._uU(33,"Created At"),e.qZA(),e.TgZ(34,"dd",99),e._uU(35),e.ALo(36,"date"),e.qZA()(),e.TgZ(37,"div",102)(38,"dt",103),e._uU(39,"Order Total Amount"),e.qZA(),e.TgZ(40,"dd",73),e._uU(41),e.ALo(42,"currency"),e.qZA()()()()),2&n){const t=e.oxw(2);e.xp6(8),e.Oqu(null==t.order?null:t.order.orderId),e.xp6(4),e.Q6J("ngClass",e.l5B(19,Vt,"pending"==(null==t.order?null:t.order.status),"success"==(null==t.order?null:t.order.status),"failed"==(null==t.order?null:t.order.status),"refund"==(null==t.order?null:t.order.status))),e.xp6(1),e.hij(" ",null==t.order?null:t.order.status," "),e.xp6(4),e.Q6J("ngClass",e.l5B(24,jt,"hold"==(null==t.order?null:t.order.foodStatus),"served"==(null==t.order?null:t.order.foodStatus),"cancel"==(null==t.order?null:t.order.foodStatus),"preparing"==(null==t.order?null:t.order.foodStatus))),e.xp6(1),e.hij(" ",null==t.order?null:t.order.foodStatus," "),e.xp6(1),e.Q6J("ngIf",null==t.order||null==t.order.table?null:t.order.table.name),e.xp6(5),e.Oqu(null==t.order?null:t.order.preparationTime),e.xp6(5),e.Oqu(e.xi3(30,10,null==t.order?null:t.order.updatedAt,"medium")),e.xp6(6),e.Oqu(e.xi3(36,13,null==t.order?null:t.order.createdAt,"medium")),e.xp6(6),e.hij("",e.xi3(42,16,null==t.order?null:t.order.totalAmount,t.order.currency)," ")}}function Lt(n,o){if(1&n&&(e.TgZ(0,"div",97)(1,"dt",98),e._uU(2,"Name"),e.qZA(),e.TgZ(3,"dd",99),e._uU(4),e.qZA()()),2&n){const t=e.oxw(3);e.xp6(4),e.Oqu(null==t.order||null==t.order.user?null:t.order.user.fullName)}}function Pt(n,o){if(1&n&&(e.TgZ(0,"div",94)(1,"h2",95),e._uU(2,"User Info"),e.qZA(),e.TgZ(3,"dl",96),e.YNc(4,Lt,5,1,"div",101),e.TgZ(5,"div",97)(6,"dt",98),e._uU(7,"Email"),e.qZA(),e.TgZ(8,"dd",99),e._uU(9),e.qZA()(),e.TgZ(10,"div",97)(11,"dt",98),e._uU(12,"Mobile"),e.qZA(),e.TgZ(13,"dd",99),e._uU(14),e.qZA()()()()),2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("ngIf",t.order.user.fullName),e.xp6(5),e.Oqu(null==t.order||null==t.order.user?null:t.order.user.email),e.xp6(5),e.AsE(" ",null==t.order||null==t.order.user?null:t.order.user.countryCode,"\xa0",null==t.order||null==t.order.user?null:t.order.user.number,"")}}const N=function(n){return{"text-indigo-600":n}};function $t(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"button",7),e.NdJ("click",function(){return e.CHM(t),e.oxw().goBackback()}),e.TgZ(4,"mat-icon",8),e._uU(5," arrow_back"),e.qZA(),e._uU(6," Back "),e.qZA(),e.TgZ(7,"button",9),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return i.updateOrder(i.order.id)}),e.TgZ(8,"mat-icon",10),e._uU(9," save"),e.qZA(),e._uU(10," Save "),e.qZA()(),e.TgZ(11,"nav",11)(12,"ol",12)(13,"li",13)(14,"div",14)(15,"span",15),e.YNc(16,yt,3,0,"span",16),e.YNc(17,Zt,3,0,"span",17),e.TgZ(18,"span",18),e._uU(19,"Payment"),e.qZA()()(),e.TgZ(20,"div",19),e.O4$(),e.TgZ(21,"svg",20),e._UZ(22,"path",21),e.qZA()()(),e.kcU(),e.TgZ(23,"li",13)(24,"div",22),e.YNc(25,St,3,0,"span",16),e.YNc(26,At,3,0,"span",23),e.TgZ(27,"span",18),e._uU(28,"Food Ready"),e.qZA()(),e.TgZ(29,"div",19),e.O4$(),e.TgZ(30,"svg",20),e._UZ(31,"path",21),e.qZA()()(),e.kcU(),e.TgZ(32,"li",13)(33,"div",24)(34,"span",15),e.YNc(35,Ot,3,0,"span",16),e.YNc(36,Ct,3,0,"span",23),e.TgZ(37,"span",18),e._uU(38,"Food Served"),e.qZA()()()()()(),e.TgZ(39,"h1",25),e._uU(40,"Order Details"),e.qZA(),e.TgZ(41,"div",26)(42,"dl",27)(43,"dt",28),e._uU(44,"Order Id\xa0"),e.qZA(),e.TgZ(45,"dd",29),e._uU(46),e.qZA(),e.TgZ(47,"dt")(48,"span",30),e._uU(49,"Number"),e.qZA(),e.TgZ(50,"span",31),e._uU(51,"\xb7"),e.qZA()(),e.TgZ(52,"dd",32),e._uU(53),e.qZA(),e.TgZ(54,"dt")(55,"span",30),e._uU(56,"Email"),e.qZA(),e.TgZ(57,"span",31),e._uU(58,"\xb7"),e.qZA()(),e.TgZ(59,"dd",32),e._uU(60),e.qZA(),e.TgZ(61,"dt")(62,"span",30),e._uU(63,"Name"),e.qZA(),e.TgZ(64,"span",31),e._uU(65,"\xb7"),e.qZA()(),e.TgZ(66,"dd",32),e._uU(67),e.qZA()(),e.TgZ(68,"div",33)(69,"button",34),e.NdJ("click",function(i){return e.CHM(t),e.oxw().toggleRightSideBar(!0),i.stopPropagation()}),e._uU(70,"View all orders"),e.qZA()()(),e.TgZ(71,"div",35),e.YNc(72,Ft,14,4,"div",36),e.qZA(),e.TgZ(73,"main",37)(74,"section",38),e.YNc(75,Yt,9,6,"ul",39),e.qZA(),e.TgZ(76,"section",40),e.YNc(77,Et,43,29,"div",41),e.YNc(78,Pt,15,4,"div",41),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(16),e.Q6J("ngIf",t.getStepStatus(t.order).payment),e.xp6(1),e.Q6J("ngIf",!t.getStepStatus(t.order).payment),e.xp6(1),e.Q6J("ngClass",e.VKq(17,N,!t.getStepStatus(t.order).payment)),e.xp6(7),e.Q6J("ngIf",t.getStepStatus(t.order).food&&t.getStepStatus(t.order).payment),e.xp6(1),e.Q6J("ngIf",!t.getStepStatus(t.order).food&&t.getStepStatus(t.order).payment),e.xp6(1),e.Q6J("ngClass",e.VKq(19,N,!t.getStepStatus(t.order).food&&t.getStepStatus(t.order).payment)),e.xp6(8),e.Q6J("ngIf",t.getStepStatus(t.order).delivered&&t.getStepStatus(t.order).food&&t.getStepStatus(t.order).payment),e.xp6(1),e.Q6J("ngIf",!t.getStepStatus(t.order).delivered&&t.getStepStatus(t.order).payment&&t.getStepStatus(t.order).food),e.xp6(1),e.Q6J("ngClass",e.VKq(21,N,!t.getStepStatus(t.order).delivered&&t.getStepStatus(t.order).payment&&t.getStepStatus(t.order).food)),e.xp6(9),e.Oqu(null==t.order?null:t.order.orderId),e.xp6(7),e.Oqu(null==t.order||null==t.order.user?null:t.order.user.number),e.xp6(7),e.Oqu(null==t.order||null==t.order.user?null:t.order.user.email),e.xp6(7),e.Oqu(null==t.order||null==t.order.user?null:t.order.user.fullName),e.xp6(5),e.Q6J("ngForOf",t.dropDown),e.xp6(3),e.Q6J("ngIf",t.order),e.xp6(2),e.Q6J("ngIf",t.order),e.xp6(1),e.Q6J("ngIf",t.order)}}function Gt(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"app-right-side-bar",104),e.NdJ("closeBar",function(i){return e.CHM(t),e.oxw().toggleRightSideBar(i)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("order",t.order)}}const Ht=[{path:"",component:Ge,pathMatch:"full"},{path:"view/:orderId",component:(()=>{class n{constructor(t,r,i,l,s,a,c,f){this.adminService=t,this.mainService=r,this.route=i,this._location=l,this.router=s,this.ngZone=a,this.socket=c,this.restaurantService=f,this.loading=!0,this.showDateRange=!1,this.dropDown=u.g.ADMIN_DROPDOWN_ORDER_MENU,this.dropDownSelectedValue={},this.showRightSideBar=!1,this.page=1,this.pageSize=20,this.dropDownSelectedValue[u.g.ADMIN_ORDER_STATUS_DROPDOWN]="",this.dropDownSelectedValue[u.g.ADMIN_FOOD_STATUS_DROPDOWN]="",this.dropDownSelectedValue[u.g.ADMIN_FOOD_PREPARATION_DROPDOWN]=""}ngOnInit(){var t;const r=this.restaurantService.getRestaurantSlug();r&&(null===(t=this.route)||void 0===t||t.params.subscribe(i=>{this.getSingleOrder(r,+i.orderId)}))}goBackback(){this._location.back()}getSingleOrder(t,r){this.loading=!0,this.adminService.getSingleOrder(t,r).then(i=>{this.order=i.data.results[0],this.emitOrderRead(this.order,t),this.order?(this.dropDownSelectedValue[u.g.ADMIN_ORDER_STATUS_DROPDOWN]=this.order.status,this.dropDownSelectedValue[u.g.ADMIN_FOOD_STATUS_DROPDOWN]=this.order.foodStatus,this.dropDownSelectedValue[u.g.ADMIN_FOOD_PREPARATION_DROPDOWN]=this.order.preparationTime):this.mainService.openDialog("Error",this.mainService.errorMessage("No data found",!0),"E"),this.loading=!1}).catch(i=>{this.loading=!1,console.log(i),this.mainService.openDialog("Error",this.mainService.errorMessage(i),"E")})}updateOrder(t){this.loading=!0;const r={status:this.dropDownSelectedValue[u.g.ADMIN_ORDER_STATUS_DROPDOWN]||this.order.status,foodStatus:this.dropDownSelectedValue[u.g.ADMIN_FOOD_STATUS_DROPDOWN]||this.order.foodStatus,preparationTime:this.dropDownSelectedValue[u.g.ADMIN_FOOD_PREPARATION_DROPDOWN]||this.order.preparationTime,mUpdatedBy:[this.mainService.getToLocalStorage(u.g.LOCAL_USER).id]};this.adminService.updateOrder(t,r).then(i=>{this.loading=!1,this.mainService.openDialog("Success","Order Updated Successfully with Order id: "+i.data.orderId,"S",!0,!1)}).catch(i=>{this.loading=!1,console.log(i),this.mainService.openDialog("Error",this.mainService.errorMessage(i),"E")})}emitOrderRead(t,r){this.socket.emit(u.g.SOCKET_ORDER_READ,t,r,i=>{})}getImageUrl(t){return this.mainService.getImageUrl(t,u.g.IMAGE_JSON_STRUCTURE_WITHOUT_ATTRIBUTE)}getSelectedValue(t,r){if(r==u.g.ADMIN_ORDER_STATUS_DROPDOWN){if(this.dropDownSelectedValue[u.g.ADMIN_ORDER_STATUS_DROPDOWN]==t)return!0}else if(r==u.g.ADMIN_FOOD_STATUS_DROPDOWN){if(this.dropDownSelectedValue[u.g.ADMIN_FOOD_STATUS_DROPDOWN]==t)return!0}else if(r==u.g.ADMIN_FOOD_PREPARATION_DROPDOWN&&this.dropDownSelectedValue[u.g.ADMIN_FOOD_PREPARATION_DROPDOWN]==t)return!0;return!1}changeSelectedValue(t,r){r==u.g.ADMIN_ORDER_STATUS_DROPDOWN?this.dropDownSelectedValue[u.g.ADMIN_ORDER_STATUS_DROPDOWN]=t:r==u.g.ADMIN_FOOD_STATUS_DROPDOWN?this.dropDownSelectedValue[u.g.ADMIN_FOOD_STATUS_DROPDOWN]=t:r==u.g.ADMIN_FOOD_PREPARATION_DROPDOWN&&(this.dropDownSelectedValue[u.g.ADMIN_FOOD_PREPARATION_DROPDOWN]=t)}toggleRightSideBar(t){this.showRightSideBar=!this.showRightSideBar,this.showRightSideBar?document.body.classList.add("no-parent-scroll"):document.body.classList.remove("no-parent-scroll")}getStepStatus(t){let r={payment:!1,food:!1,delivered:!1};return"success"==(null==t?void 0:t.status)&&(r.payment=!0),("ready"==(null==t?void 0:t.foodStatus)||"served"==(null==t?void 0:t.foodStatus))&&(r.food=!0),"served"==(null==t?void 0:t.foodStatus)&&(r.delivered=!0),r}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(S.l),e.Y36(A.J),e.Y36(_.gz),e.Y36(m.Ye),e.Y36(_.F0),e.Y36(e.R0b),e.Y36(He.$),e.Y36(O.T))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-view"]],viewQuery:function(t,r){if(1&t&&e.Gf(wt,5),2&t){let i;e.iGM(i=e.CRH())&&(r.scroller=i.first)}},decls:4,vars:3,consts:[["class","absolute top-0 left-0",4,"ngIf"],["class","bg-white  mt-8 pb-12 ",4,"ngIf"],[3,"order","closeBar",4,"ngIf"],[1,"absolute","top-0","left-0"],[1,"bg-white","mt-8","pb-12"],[1,"max-w-2xl","mx-auto","pb-24","px-4","sm:px-6","lg:max-w-7xl","lg:px-8"],[1,"mb-12","mt-6","flex","justify-between"],[1,"text-indigo-500","flex","items-center","text-sm",3,"click"],[1,"mr-2","text-base"],[1,"flex","items-center","bg-indigo-600","border","border-transparent","rounded-md","shadow-sm","py-2","px-4","text-sm","text-white","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-offset-gray-50","focus:ring-indigo-500",3,"click"],[1,"mr-2"],["aria-label","Progress",1,"my-6"],["role","list",1,"border","border-gray-300","rounded-md","divide-y","divide-gray-300","md:flex","md:divide-y-0"],[1,"relative","md:flex-1","md:flex"],[1,"group","flex","items-center","w-full"],[1,"px-4","py-2","flex","items-center","text-sm","font-medium"],["class","flex-shrink-0 w-6 h-6 flex items-center justify-center bg-green-600 rounded-full ",4,"ngIf"],["class","flex-shrink-0 w-6 h-6 flex items-center justify-center border-2 border-indigo-600 rounded-full",4,"ngIf"],[1,"ml-2","text-xs","font-medium","text-gray-500",3,"ngClass"],["aria-hidden","true",1,"hidden","md:block","absolute","top-0","right-0","h-full","w-5"],["viewBox","0 0 22 80","fill","none","preserveAspectRatio","none",1,"h-full","w-full","text-gray-300"],["d","M0 -2L20 40L0 82","vector-effect","non-scaling-stroke","stroke","currentcolor","stroke-linejoin","round"],["aria-current","step",1,"px-4","py-2","flex","items-center","text-sm","font-medium"],["class","flex-shrink-0 w-6 h-6 flex items-center justify-center border-2 border-indigo-600 text-indigo-600 rounded-full",4,"ngIf"],[1,"group","flex","items-center"],[1,"text-3xl","font-extrabold","tracking-tight","text-gray-900"],[1,"text-sm","border-b","border-gray-200","mt-2","pb-5","sm:flex","sm:justify-between"],[1,"flex","flex-wrap","text-gray-500","w-full"],[1,""],[1,"font-medium","flex-nowrap"],[1,"sr-only"],["aria-hidden","true",1,"text-gray-400","mx-2"],[1,"font-medium"],[1,"mt-4","sm:mt-0"],[1,"font-medium","text-indigo-600","bg-indigo-100","flex","flex-nowrap","truncate","rounded-md","py-2","px-3","hover:bg-indigo-200",3,"click"],[1,"mt-6","grid","grid-cols-1","sm:grid-cols-3","grid-flow-row","justify-between"],["class","w-full",4,"ngFor","ngForOf"],[1,"mt-12","lg:grid","lg:grid-cols-12","lg:gap-x-12","lg:items-start","xl:gap-x-16"],["aria-labelledby","cart-heading",1,"lg:col-span-7"],["role","list","class","border-t border-b border-gray-200 divide-y divide-gray-200",4,"ngIf"],["aria-labelledby","user-heading",1,"lg:col-span-5","space-y-6"],["class","mt-16 shadow border rounded-lg px-4 py-6 sm:p-6 lg:p-8 lg:mt-0 ",4,"ngIf"],[1,"flex-shrink-0","w-6","h-6","flex","items-center","justify-center","bg-green-600","rounded-full"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor","aria-hidden","true",1,"w-4","h-4","text-white"],["fill-rule","evenodd","d","M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule","evenodd"],[1,"flex-shrink-0","w-6","h-6","flex","items-center","justify-center","border-2","border-indigo-600","rounded-full"],[1,"text-indigo-600","text-xs"],[1,"flex-shrink-0","w-6","h-6","flex","items-center","justify-center","border-2","border-indigo-600","text-indigo-600","rounded-full"],[1,"text-xs"],[1,"w-full"],["id","listbox-label",1,"block","text-sm","font-medium","text-gray-700","px-2","mt-4"],[1,"sm:hidden","mt-1","relative"],["type","button","aria-haspopup","listbox","aria-expanded","true","aria-labelledby","listbox-label",1,"relative","w-full","bg-white","hover:bg-gray-100","border","border-gray-300","rounded-md","shadow-sm","pl-3","pr-10","py-2","text-left","cursor-default","focus:outline-none","focus:ring-1","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm",3,"click","clickOutside"],[1,"flex","items-center"],[1,"ml-3","h-5","block","truncate","capitalize"],[1,"ml-3","absolute","inset-y-0","right-0","flex","items-center","pr-2","pointer-events-none"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor","aria-hidden","true",1,"h-5","w-5","text-gray-400"],["fill-rule","evenodd","d","M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z","clip-rule","evenodd"],["class","absolute z-10 mt-1 w-full bg-white shadow-lg max-h-56 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm:text-sm","tabindex","-1","role","listbox","aria-labelledby","listbox-label","aria-activedescendant","listbox-option-3",4,"ngIf"],[1,"sm:flex","hidden","flex-col","space-y-2","mt-2","max-h-60","overflow-y-scroll","p-2"],["class"," cursor-pointer active:ring-2 active:ring-offset-2 active:ring-indigo-500 hover:ring-2 hover:ring-offset-2 hover:ring-indigo-500 border-2  rounded-md py-3 px-3 flex items-center justify-center text-sm font-medium capitalize sm:flex-1 focus:outline-none",3,"ngClass","click",4,"ngFor","ngForOf"],["tabindex","-1","role","listbox","aria-labelledby","listbox-label","aria-activedescendant","listbox-option-3",1,"absolute","z-10","mt-1","w-full","bg-white","shadow-lg","max-h-56","rounded-md","py-1","text-base","ring-1","ring-black","ring-opacity-5","overflow-auto","focus:outline-none","sm:text-sm"],["class","cursor-default select-none relative py-2 pl-3 pr-9","id","listbox-option-0","role","option",3,"ngClass","click",4,"ngFor","ngForOf"],["id","listbox-option-0","role","option",1,"cursor-default","select-none","relative","py-2","pl-3","pr-9",3,"ngClass","click"],[1,"ml-3","block","truncate","capitalize",3,"ngClass"],["class","text-white absolute inset-y-0 right-0 flex items-center pr-4",4,"ngIf"],[1,"text-white","absolute","inset-y-0","right-0","flex","items-center","pr-4"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor","aria-hidden","true",1,"h-5","w-5"],[1,"cursor-pointer","active:ring-2","active:ring-offset-2","active:ring-indigo-500","hover:ring-2","hover:ring-offset-2","hover:ring-indigo-500","border-2","rounded-md","py-3","px-3","flex","items-center","justify-center","text-sm","font-medium","capitalize","sm:flex-1","focus:outline-none",3,"ngClass","click"],["type","radio",1,"sr-only"],["role","list",1,"border-t","border-b","border-gray-200","divide-y","divide-gray-200"],[1,"py-6","flex","items-center","justify-between"],[1,"text-base","font-medium"],[1,"text-base","font-medium","text-red-500"],["class","py-6 flex items-center justify-between",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"text-sm","font-medium"],[1,"text-gray-600","font-semibold","text-xs","ml-2"],[1,"text-sm","font-medium","text-red-500"],["class","flex py-6 sm:py-10",4,"ngFor","ngForOf"],[1,"flex","py-6","sm:py-10"],[1,"w-1/5","h-28","bg-gray-200","aspect-3","rounded-md","overflow-hidden"],["loading","lazy",1,"w-full","h-full","object-center","object-cover","lg:w-full","lg:h-full",3,"src","alt"],[1,"ml-4","flex-1","flex","flex-col","justify-between","sm:ml-6"],[1,"relative","pr-9","sm:grid","sm:grid-cols-2","sm:gap-x-6","sm:pr-0"],[1,"flex","justify-between","flex-col"],[1,"text-sm"],[1,"font-medium","text-gray-700","capitalize"],[1,"text-xs","font-medium","text-gray-500","capitalize"],[1,"mt-1","flex","text-sm"],[1,"border-gray-200","text-gray-500"],[1,"mt-4","sm:mt-0","sm:pr-9"],[1,"flex","w-min","px-4","rounded-md","border","border-gray-300","py-1.5","text-base","font-medium","text-gray-700","text-left","shadow-sm","focus:outline-none","focus:ring-1","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm"],[1,"absolute","top-0","right-0","text-red-500"],[1,"mt-16","shadow","border","rounded-lg","px-4","py-6","sm:p-6","lg:p-8","lg:mt-0"],["id","summary-heading",1,"text-lg","font-medium","text-gray-900"],[1,"mt-6","space-y-4"],[1,"flex","items-center","justify-between"],[1,"text-sm","text-gray-600"],[1,"text-sm","font-medium","text-gray-900"],[1,"capitalize","px-2","inline-flex","text-xs","leading-5","font-semibold","rounded-full",3,"ngClass"],["class","flex items-center justify-between",4,"ngIf"],[1,"border-t","border-gray-200","pt-4","flex","items-center","justify-between"],[1,"text-base","font-medium","text-gray-900"],[3,"order","closeBar"]],template:function(t,r){1&t&&(e.YNc(0,Tt,1,0,"app-loader",0),e.YNc(1,$t,79,23,"div",1),e.TgZ(2,"div"),e.YNc(3,Gt,1,1,"app-right-side-bar",2),e.qZA()),2&t&&(e.Q6J("ngIf",r.loading),e.xp6(1),e.Q6J("ngIf",!r.loading&&r.order),e.xp6(2),e.Q6J("ngIf",r.showRightSideBar&&r.order))},directives:[m.O5,U.R,Z.Hw,m.mk,m.sg,Y._,bt],pipes:[m.H9,m.uU],styles:[""]}),n})(),pathMatch:"full"},{path:"create",component:ce,pathMatch:"full"}];let zt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[_.Bz.forChild(Ht)],_.Bz]}),n})(),Wt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[m.ez,g.u5,p.p0,L.FA,Z.Ps,g.UX,E.x,zt,M.p9,C.Cl,j.Cv]]}),n})()}}]);